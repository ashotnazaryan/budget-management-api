(self.webpackChunkbudget_management=self.webpackChunkbudget_management||[]).push([[300],{891:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>X});var s=t(2791),n=t(7689),r=t(56),i=t(2385),a=t(9276),o=t(1889),d=t(3400),c=t(3394),x=t(8112),u=t(7931),h=t(5900),m=t(6581),j=t(4372),C=t(7195),v=t(5527),y=t(890),f=t(3967),p=t(184);const E=e=>{var l;let{data:t,defaultCurrency:s,onClick:n}=e;const{palette:{primary:{main:a,contrastText:d}}}=(0,f.Z)(),{t:x}=(0,c.$G)(),{name:u,salary:h,amount:j,currencyIso:C,month:E}=t,g=(null===(l=r.gg.find((e=>{let{index:l}=e;return l===Number(E)})))||void 0===l?void 0:l.nameKey)||"";return(0,p.jsx)(v.Z,{elevation:1,sx:{paddingX:2,backgroundColor:a},children:(0,p.jsxs)(o.ZP,{container:!0,display:"flex",alignItems:"center",justifyContent:"space-between",flexGrow:1,columnSpacing:2,sx:{borderRadius:1,minHeight:40,cursor:"pointer"},onClick:()=>{n&&n(t)},children:[(0,p.jsx)(o.ZP,{item:!0,xs:1,display:"flex",children:(0,p.jsx)(m.Z,{name:i.Tu.receipt,sx:{fontSize:{sm:22,xs:18},color:d}})}),(0,p.jsx)(o.ZP,{item:!0,xs:4,display:"flex",justifyContent:"flex-start",children:(0,p.jsx)(y.Z,{noWrap:!0,color:d,sx:{fontSize:{sm:15,xs:13}},children:u})}),(0,p.jsx)(o.ZP,{item:!0,xs:2,display:"flex",justifyContent:"flex-start",children:(0,p.jsx)(y.Z,{noWrap:!0,color:d,sx:{fontSize:{sm:15,xs:13}},children:x(g)})}),(0,p.jsx)(o.ZP,{item:!0,xs:3,display:"flex",children:(0,p.jsxs)(y.Z,{noWrap:!0,color:d,sx:{fontSize:{sm:15,xs:13}},children:[null===j||void 0===j?void 0:j.gross," ",null===j||void 0===j?void 0:j.currencyIso]})}),(0,p.jsx)(o.ZP,{item:!0,xs:2,display:"flex",justifyContent:"flex-end",children:(0,p.jsxs)(y.Z,{noWrap:!0,color:d,sx:{fontSize:{sm:15,xs:13}},children:[h," ",C]})})]})})},g=()=>{const{t:e}=(0,c.$G)(),l=(0,n.s0)(),t=(0,x.TL)(),{invoices:v,status:y}=(0,x.CG)(u.xF),f=(0,x.CG)(u.j),g=e=>{let{id:t,name:s}=e;l("".concat(r.Z6.invoices.path,"/view/").concat(s),{state:{id:t}})};s.useEffect((()=>{"idle"===y&&t((0,u.sA)())}),[t,y]);return(0,p.jsxs)(a.Z,{flexGrow:1,children:[(0,p.jsx)(h.Z,{text:e("INVOICES.PAGE_TITLE")}),(0,p.jsxs)(o.ZP,{container:!0,rowGap:2,sx:{marginTop:4},children:["loading"===y?(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(j.Z,{type:"list"})}):"failed"!==y&&"succeeded"!==y||null!==v&&void 0!==v&&v.length?(0,p.jsx)(p.Fragment,{children:v.map((e=>(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(E,{data:e,defaultCurrency:f,onClick:g})},e.id)))}):(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(C.Z,{text:e("INVOICES.EMPTY_TEXT")})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,display:"flex",justifyContent:"flex-end",children:(0,p.jsx)(d.Z,{color:"primary",onClick:()=>{l("".concat(r.Z6.invoices.path,"/new"))},sx:{alignSelf:"flex-end"},children:(0,p.jsx)(m.Z,{name:i.Tu.plus,sx:{fontSize:40}})})})]})]})};var O=t(8870),Z=t(3013),b=t(7034),I=t(9525),N=t(8126);N.Zx.register({family:"SourceSansPro",fonts:[{src:"https://fonts.gstatic.com/s/sourcesanspro/v14/6xK3dSBYKcSV-LCoeQqfX1RYOo3aPw.ttf",fontWeight:400},{src:"https://fonts.gstatic.com/s/sourcesanspro/v14/6xKydSBYKcSV-LCoeQqfX1RYOo3i54rAkA.ttf",fontWeight:700}]});const T=N.mM.create({page:{backgroundColor:"#E4E4E4",fontFamily:"SourceSansPro",padding:20,borderWidth:0},name:{fontSize:15,fontWeight:"bold",textAlign:"center"},heading:{display:"flex",flexDirection:"row",alignItems:"center"},label:{fontSize:12,fontWeight:"bold",marginRight:10},value:{fontSize:12},account:{fontSize:12,marginTop:30},sellerBuyer:{display:"flex",flexDirection:"row",alignItems:"flex-start",marginTop:40},seller:{flex:50},buyer:{flex:50},table:{display:"flex",flexDirection:"column",marginTop:40,border:"1px solid #000"},headerRow:{display:"flex",flexDirection:"row",alignItems:"flex-end",backgroundColor:"#959ba1"},bodyRow:{display:"flex",flexDirection:"row",alignItems:"center"},tableCol:{borderRight:"1px solid #000",height:"100%",justifyContent:"center"},noCol:{width:"5%"},nameCol:{width:"22%"},unitCol:{width:"5%"},quantityCol:{width:"5%"},unitNetPriceCol:{width:"12%"},netValueCol:{width:"12%"},vatRateCol:{width:"6%"},vatAmountCol:{width:"12%"},grossValueCol:{width:"12%"},currencyCol:{width:"9%"},tableCell:{fontSize:11,margin:4},total:{marginTop:20,fontSize:13,fontWeight:"bold",textAlign:"right"},vatExemption:{marginTop:20,fontSize:11},noBorder:{border:"none"}}),S=(e,l)=>(0,p.jsx)(N.xv,{style:T.tableCell,hyphenationCallback:e=>((e,l)=>{const t=Math.ceil(e.length/l),s=new Array(t);for(let n=0,r=0;n<t;++n,r+=l)s[n]=e.substring(r,r+l);return s})(e,l),children:e}),M=e=>{var l,t,s,n,r,i;let{data:a,defaultCurrency:o,saleDate:d}=e;const{t:x}=(0,c.$G)();return(0,p.jsx)(N.BB,{children:(0,p.jsxs)(N.T3,{size:"A4",style:T.page,children:[(0,p.jsx)(N.G7,{children:(0,p.jsx)(N.xv,{style:T.name,children:a.name})}),(0,p.jsxs)(N.G7,{style:T.heading,children:[(0,p.jsxs)(N.xv,{style:T.label,children:[x("INVOICES.DOCUMENT.INVOICE_NO"),"."]}),(0,p.jsx)(N.xv,{style:T.value,children:(0,Z.D9)()})]}),(0,p.jsxs)(N.G7,{style:T.heading,children:[(0,p.jsxs)(N.xv,{style:T.label,children:[x("INVOICES.DOCUMENT.ISSUE_DATE"),":"]}),(0,p.jsx)(N.xv,{style:T.value,children:(0,Z.Ux)()})]}),(0,p.jsxs)(N.G7,{style:T.heading,children:[(0,p.jsxs)(N.xv,{style:T.label,children:[x("INVOICES.DOCUMENT.SALE_DATE"),":"]}),(0,p.jsx)(N.xv,{style:T.value,children:d})]}),(0,p.jsxs)(N.G7,{style:T.heading,children:[(0,p.jsxs)(N.xv,{style:T.label,children:[x("INVOICES.DOCUMENT.DUE_DATE"),":"]}),(0,p.jsx)(N.xv,{style:T.value,children:(0,Z.FW)(14)})]}),(0,p.jsxs)(N.G7,{style:T.heading,children:[(0,p.jsxs)(N.xv,{style:T.label,children:[x("INVOICES.DOCUMENT.PAYMENT_TYPE"),":"]}),(0,p.jsx)(N.xv,{style:T.value,children:x("INVOICES.DOCUMENT.TRANSFER")})]}),(0,p.jsxs)(N.G7,{style:T.sellerBuyer,children:[(0,p.jsxs)(N.G7,{style:T.seller,children:[(0,p.jsxs)(N.xv,{style:T.label,children:[x("INVOICES.DOCUMENT.SELLER"),":"]}),(0,p.jsxs)(N.G7,{children:[(0,p.jsx)(N.xv,{style:T.value,children:a.sellerName}),(0,p.jsx)(N.xv,{style:T.value,children:a.sellerAddress}),(0,p.jsx)(N.xv,{style:T.value,children:a.sellerLocation}),(0,p.jsxs)(N.xv,{style:T.value,children:[x("COMMON.VAT_ID")," ",a.sellerVatID]}),(0,p.jsx)(N.xv,{style:T.account,children:a.sellerAccount})]})]}),(0,p.jsxs)(N.G7,{style:T.buyer,children:[(0,p.jsxs)(N.xv,{style:T.label,children:[x("INVOICES.DOCUMENT.BUYER"),":"]}),(0,p.jsxs)(N.G7,{children:[(0,p.jsx)(N.xv,{style:T.value,children:a.buyerName}),(0,p.jsx)(N.xv,{style:T.value,children:a.buyerAddress}),(0,p.jsx)(N.xv,{style:T.value,children:a.buyerLocation}),(0,p.jsx)(N.xv,{style:T.value,children:a.buyerVatID})]})]})]}),(0,p.jsxs)(N.G7,{style:T.table,children:[(0,p.jsxs)(N.G7,{style:T.headerRow,children:[(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.noCol},children:(0,p.jsx)(N.xv,{style:T.tableCell,children:x("INVOICES.DOCUMENT.TABLE.NO")})}),(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.nameCol},children:(0,p.jsx)(N.xv,{style:T.tableCell,children:x("INVOICES.DOCUMENT.TABLE.NAME")})}),(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.unitCol},children:S(x("INVOICES.DOCUMENT.TABLE.UNIT"),3)}),(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.quantityCol},children:S(x("INVOICES.DOCUMENT.TABLE.QUANTITY"),3)}),(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.unitNetPriceCol},children:(0,p.jsx)(N.xv,{style:T.tableCell,children:x("INVOICES.DOCUMENT.TABLE.UNIT_NET_PRICE")})}),(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.netValueCol},children:(0,p.jsx)(N.xv,{style:T.tableCell,children:x("INVOICES.DOCUMENT.TABLE.NET_VALUE")})}),(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.vatRateCol},children:S(x("INVOICES.DOCUMENT.TABLE.VAT_RATE"),3)}),(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.vatAmountCol},children:(0,p.jsx)(N.xv,{style:T.tableCell,children:x("INVOICES.DOCUMENT.TABLE.VAT_AMOUNT")})}),(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.grossValueCol},children:(0,p.jsx)(N.xv,{style:T.tableCell,children:x("INVOICES.DOCUMENT.TABLE.GROSS_VALUE")})}),(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.noBorder,...T.currencyCol},children:(0,p.jsx)(N.xv,{style:T.tableCell,children:x("INVOICES.DOCUMENT.TABLE.CURRENCY")})})]}),(0,p.jsxs)(N.G7,{style:T.bodyRow,children:[(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.noCol},children:(0,p.jsx)(N.xv,{style:T.tableCell,children:"1"})}),(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.nameCol},children:S("".concat(x("INVOICES.DOCUMENT.TABLE.PROGRAMMING_SERVICES")," ").concat((0,Z.VY)()),20)}),(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.unitCol},children:(0,p.jsx)(N.xv,{style:T.tableCell,children:"\u2014"})}),(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.quantityCol},children:(0,p.jsx)(N.xv,{style:T.tableCell,children:"1"})}),(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.unitNetPriceCol},children:(0,p.jsx)(N.xv,{style:T.tableCell,children:null===(l=a.amount)||void 0===l?void 0:l.net})}),(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.netValueCol},children:(0,p.jsx)(N.xv,{style:T.tableCell,children:null===(t=a.amount)||void 0===t?void 0:t.net})}),(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.vatRateCol},children:(0,p.jsx)(N.xv,{style:T.tableCell,children:a.vatIncluded?"".concat(null===(s=a.amount)||void 0===s?void 0:s.vatRate,"%"):"\u2014"})}),(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.vatAmountCol},children:(0,p.jsx)(N.xv,{style:T.tableCell,children:a.vatIncluded?null===(n=a.amount)||void 0===n?void 0:n.vatAmount:"\u2014"})}),(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.grossValueCol},children:(0,p.jsx)(N.xv,{style:T.tableCell,children:null===(r=a.amount)||void 0===r?void 0:r.gross})}),(0,p.jsx)(N.G7,{style:{...T.tableCol,...T.noBorder,...T.currencyCol},children:(0,p.jsx)(N.xv,{style:T.tableCell,children:o.iso})})]})]}),(0,p.jsx)(N.G7,{style:T.total,children:(0,p.jsxs)(N.xv,{children:[x("INVOICES.DOCUMENT.TABLE.TOTAL"),": ",null===(i=a.amount)||void 0===i?void 0:i.gross," ",o.iso]})}),!a.vatIncluded&&(0,p.jsx)(N.G7,{style:T.vatExemption,children:(0,p.jsx)(N.xv,{children:x("INVOICES.DOCUMENT.TABLE.VAT_EXEMPTION")})})]})})};var A=t(1134),P=t(5022),V=t(7497),G=t(1890),D=t(9078),B=t(1634),w=t(9955),L=t(7071),W=t(5523);const U=e=>{let{name:l,label:t,rules:s={},onSwitchChange:n,...r}=e;const{control:i,formState:{errors:a}}=(0,A.Gc)();return(0,p.jsx)(A.Qr,{control:i,name:l,rules:s,render:e=>{let{field:s,fieldState:{error:i}}=e;return(0,p.jsxs)(O.Z,{position:"relative",children:[(0,p.jsx)(W.Z,{control:(0,p.jsx)(w.Z,{...r,...s,value:s.value,checked:s.value,onChange:e=>{s.onChange(e),(e=>{n&&n(e.target.checked)})(e)}}),label:(0,p.jsx)(y.Z,{children:t}),labelPlacement:"start",sx:{"&.MuiFormControlLabel-root":{margin:0}}}),a[l]&&(0,p.jsx)(L.Z,{sx:{position:"absolute"},error:!0,children:null===i||void 0===i?void 0:i.message})]})}})},R=e=>{let{data:l,loading:t,mode:n,onPreview:a,onSubmit:d}=e;const{t:h}=(0,c.$G)(),m=(0,Z.w8)(),{defaultCurrency:{iso:j}}=(0,x.CG)(u.vi),C=r.a,f=r.Mf.filter((e=>e.iso!==j)),E=r.gg,g=E.find((e=>e.index===(0,Z.UF)())),[O,b]=s.useState(!1),I=n===i.df.view,N=n===i.df.create,T={name:"".concat(h("INVOICES.INVOICE"),"_").concat(h((null===g||void 0===g?void 0:g.nameKey)||"")||(null===g||void 0===g?void 0:g.name)),salary:"",currencyIso:N?"USD":l.currencyIso||"",month:N?null===g||void 0===g?void 0:g.index:l.month||(null===g||void 0===g?void 0:g.index),vatIncluded:!1,sellerName:"",sellerAddress:"",sellerLocation:"",sellerVatID:"",sellerAccount:"",buyerName:"",buyerAddress:"",buyerLocation:"",buyerVatID:""},S=(0,A.cI)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:T}),{setValue:M,handleSubmit:w}=S;s.useEffect((()=>{Object.keys(l).forEach((e=>{M(e,l[e])})),b(!!l.vatIncluded)}),[l,M]);const L=e=>{const l={...e,month:Number(e.month)};d(l)};return(0,p.jsx)(A.RV,{...S,children:(0,p.jsx)("form",{onSubmit:w(L),children:(0,p.jsxs)(o.ZP,{container:!0,gap:3,children:[(0,p.jsx)(o.ZP,{item:!0,container:!0,children:(0,p.jsxs)(v.Z,{elevation:1,sx:{paddingX:3,paddingTop:2,paddingBottom:6,width:"100%"},children:[(0,p.jsx)(y.Z,{sx:{marginTop:2,marginBottom:4},fontSize:17,children:h("INVOICES.MAIN_INFO")}),(0,p.jsxs)(o.ZP,{item:!0,container:!0,gap:7,children:[(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(V.Z,{inputProps:{readOnly:I},label:h("COMMON.NAME"),name:i.W4.name,rules:{required:{value:!0,message:h(m.name.required.message)}}})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(V.Z,{inputProps:{readOnly:I},label:h("COMMON.SALARY"),type:"number",name:i.W4.salary,rules:{required:{value:!0,message:h(m.salary.required.message)},pattern:{value:C,message:h(m.salary.pattern.message)}}})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(G.Z,{inputProps:{readOnly:I},label:h("COMMON.CURRENCY"),name:i.W4.currencyIso,rules:{required:{value:!0,message:h(m.currencyIso.required.message)}},children:f.map((e=>{let{iso:l,name:t,nameKey:s,symbol:n}=e;return(0,p.jsx)(P.Z,{value:l,children:(0,p.jsx)(D.Z,{currency:{iso:l,symbol:n,name:t,nameKey:s}})},l)}))})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(G.Z,{inputProps:{readOnly:I},label:h("COMMON.MONTH"),name:i.W4.month,rules:{required:{value:!0,message:h(m.month.required.message)}},children:E.map((e=>(0,p.jsx)(P.Z,{value:e.index,children:h(e.nameKey)||e.name},e.index)))})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(U,{name:i.W4.vatIncluded,label:h("INVOICES.INCLUDE_VAT"),checked:O,disabled:I,onSwitchChange:e=>{b(e),M(i.W4.vatIncluded,e)}})})]})]})}),(0,p.jsx)(o.ZP,{item:!0,container:!0,children:(0,p.jsxs)(v.Z,{elevation:1,sx:{paddingX:3,paddingTop:2,paddingBottom:7,width:"100%"},children:[(0,p.jsx)(y.Z,{sx:{marginTop:2,marginBottom:4},fontSize:17,children:h("INVOICES.SELLER_INFO")}),(0,p.jsxs)(o.ZP,{item:!0,container:!0,gap:7,children:[(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(V.Z,{inputProps:{readOnly:I},label:h("COMMON.NAME"),name:i.W4.sellerName,rules:{required:{value:!0,message:h(m.sellerName.required.message)}}})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(V.Z,{inputProps:{readOnly:I},label:h("COMMON.ADDRESS"),name:i.W4.sellerAddress,rules:{required:{value:!0,message:h(m.sellerAddress.required.message)}}})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(V.Z,{inputProps:{readOnly:I},label:h("COMMON.LOCATION"),name:i.W4.sellerLocation,rules:{required:{value:!0,message:h(m.sellerLocation.required.message)}}})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(V.Z,{inputProps:{readOnly:I},label:h("COMMON.VAT_ID"),name:i.W4.sellerVatID,rules:{required:{value:!0,message:h(m.sellerVatID.required.message)}}})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(V.Z,{inputProps:{readOnly:I},label:h("COMMON.ACCOUNT"),name:i.W4.sellerAccount,rules:{required:{value:!0,message:h(m.sellerAccount.required.message)}}})})]})]})}),(0,p.jsx)(o.ZP,{item:!0,container:!0,children:(0,p.jsxs)(v.Z,{elevation:1,sx:{paddingX:3,paddingTop:2,paddingBottom:7,width:"100%"},children:[(0,p.jsx)(y.Z,{sx:{marginTop:2,marginBottom:4},fontSize:17,children:h("INVOICES.BUYER_INFO")}),(0,p.jsxs)(o.ZP,{item:!0,container:!0,gap:7,children:[(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(V.Z,{inputProps:{readOnly:I},label:h("COMMON.NAME"),name:i.W4.buyerName,rules:{required:{value:!0,message:h(m.buyerName.required.message)}}})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(V.Z,{inputProps:{readOnly:I},label:h("COMMON.ADDRESS"),name:i.W4.buyerAddress,rules:{required:{value:!0,message:h(m.buyerAddress.required.message)}}})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(V.Z,{inputProps:{readOnly:I},label:h("COMMON.LOCATION"),name:i.W4.buyerLocation,rules:{required:{value:!0,message:h(m.buyerLocation.required.message)}}})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(V.Z,{inputProps:{readOnly:I},label:h("COMMON.VAT_ID"),name:i.W4.buyerVatID,rules:{required:{value:!0,message:h(m.buyerVatID.required.message)}}})})]})]})}),!I&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(B.Z,{"aria-label":"Preview invoice",fullWidth:!0,type:"submit",variant:"contained",onClick:w((e=>{const l={...e,month:Number(e.month)};a(l)})),children:h("COMMON.PREVIEW")})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(B.Z,{"aria-label":"Save invoice",fullWidth:!0,variant:"contained",loading:t,onClick:w(L),children:h("COMMON.SAVE")})})]})]})})})};var _,q=t(168);const k=(0,t(225).Z)(N.Z$)(_||(_=(0,q.Z)(["\n  min-height: calc(100vh - 30px);\n  width: 100%;\n"])));var z=t(173);const Y=e=>{let{...l}=e;return(0,p.jsx)(O.Z,{children:l.children(z)})};var F=t(3809);const K=e=>{let{mode:l}=e;const{t:t}=(0,c.$G)(),a=(0,n.s0)(),{getStatus:d,createEditStatus:m,deleteStatus:v}=(0,x.CG)(u.xF),{rates:E,date:g}=(0,x.CG)(u.Of),T=(0,x.CG)(u.vf),S=(0,x.CG)(u.Jl),A=(0,x.CG)(u.Qy),{status:P,userProfile:V}=(0,x.CG)(u.tM),G=(0,x.CG)(u.dy),D=(0,x.CG)(u.j),w=(0,x.TL)(),{state:L}=(0,n.TH)(),{palette:{info:{contrastText:W}}}=(0,f.Z)(),U=null===L||void 0===L?void 0:L.id,_="loading"===m,q="loading"===v,z=l===i.df.edit,K=l===i.df.view,X=l===i.df.create,[$,Q]=s.useState({}),[H,J]=s.useState(!1),[ee,le]=s.useState(!1),[te,se]=s.useState(!1),[ne,re]=s.useState(!1),ie=(0,Z.pz)(l,t,d,"INVOICES","NEW_INVOICE","EMPTY_TITLE",S),ae=e=>{const l=de(e);w((0,u.xT)(l)),Q({...e,amount:l})},oe=e=>{const l=de(e);w((0,u.xT)(l)),Q({...e,amount:l}),J(!0),w(z?(0,u.$v)([U,{...e,amount:l}]):(0,u.Z$)({...e,amount:l}))},de=e=>{var l;const{salary:t,vatIncluded:s,currencyIso:n}=e,r=null===(l=E.find((e=>e.code===n)))||void 0===l?void 0:l.value;return(0,Z.fu)(D.iso,r,Number(t),s)},ce=s.useCallback((()=>{w((0,u.p3)()),w((0,u.IW)())}),[w]),xe=s.useCallback((()=>{a("".concat(r.Z6.invoices.path)),ce(),Q({})}),[a,ce]);s.useEffect((()=>{"succeeded"===m&&H&&(re(!1),w((0,u.QJ)()),xe()),"failed"===m&&H&&re(!0)}),[w,xe,m,H]),s.useEffect((()=>{Q((e=>({...e,amount:T})))}),[T]),s.useEffect((()=>{if("idle"===P&&w((0,u.Ai)()),"succeeded"===P){const e=(0,Z.Aj)(G,V);Q((l=>({...l,...e})))}}),[w,P,G,V]),s.useEffect((()=>{"succeeded"===v&&ee&&xe(),"failed"===v&&ee&&(re(!0),se(!1))}),[xe,v,ee]),s.useEffect((()=>{U||w((0,u.iS)())}),[U,w]),s.useEffect((()=>{!U||"idle"!==d||X||ee||w((0,u.d5)(U))}),[U,X,d,w,ee]),s.useEffect((()=>{S&&"succeeded"===d&&(z||K)&&Q(S)}),[S,z,K,d,w]);return(0,p.jsxs)(O.Z,{flexGrow:1,children:[(0,p.jsx)(h.Z,{withBackButton:!0,withEditButton:K&&!!S,withDeleteButton:z&&!!S,withCancelButton:!K&&!!S,text:ie,onBackButtonClick:xe,onEditButtonClick:()=>{z||a("".concat(r.Z6.invoices.path,"/edit/").concat(null===S||void 0===S?void 0:S.name),{state:{id:U}})},onDeleteButtonClick:()=>{se(!0)},onCancelButtonClick:()=>{z?a("".concat(r.Z6.invoices.path,"/view/").concat(null===S||void 0===S?void 0:S.name),{state:{id:U}}):a(r.Z6.invoices.path)}}),"loading"===d?(0,p.jsx)(j.Z,{type:"form"}):X||S&&U||"failed"!==d?(0,p.jsxs)(o.ZP,{container:!0,columnSpacing:3,rowSpacing:5,children:[(0,p.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,p.jsx)(R,{data:$,loading:_,mode:l,onPreview:ae,onSubmit:oe})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,p.jsx)(Y,{children:e=>{let{isAndroid:l}=e;return l?(0,p.jsx)(N.WD,{document:(0,p.jsx)(M,{data:$,saleDate:g,defaultCurrency:D}),fileName:$.name,children:e=>{let{loading:l}=e;return l?(0,p.jsx)(F.Z,{}):(0,p.jsxs)(O.Z,{sx:{marginY:2},children:[(0,p.jsx)(y.Z,{variant:"subtitle1",color:W,children:t("INVOICES.DOCUMENT.UNSUPPORTED_DEVICE")}),(0,p.jsx)(B.Z,{"aria-label":"Download",fullWidth:!0,color:"secondary",variant:"contained",sx:{marginTop:2},children:t("COMMON.DOWNLOAD")})]})}}):(0,p.jsx)(k,{style:{width:"100%",height:"100vh"},children:(0,p.jsx)(M,{data:$,saleDate:g,defaultCurrency:D})})}})})]}):(0,p.jsx)(C.Z,{text:t("INVOICES.EMPTY_TEXT_RENDER_CONTENT")}),(0,p.jsx)(b.Z,{type:"error",open:ne,text:null!==A&&void 0!==A&&A.messageKey?t(A.messageKey):(null===A||void 0===A?void 0:A.message)||"",onClose:()=>{re(!1),le(!1)}}),(0,p.jsx)(I.Z,{fullWidth:!0,maxWidth:"xs",title:t("INVOICES.DELETE_DIALOG_TITLE"),actionButtonText:t("COMMON.YES"),open:te,loading:q,onClose:()=>{se(!1)},onAction:()=>{w((0,u.Wu)(U)),le(!0)},children:(0,p.jsx)(y.Z,{variant:"subtitle1",children:t("INVOICES.DELETE_DIALOG_CONFIRM")})})]})},X=()=>(0,p.jsxs)(n.Z5,{children:[(0,p.jsx)(n.AW,{path:"/",element:(0,p.jsx)(g,{})}),(0,p.jsx)(n.AW,{path:"/new",element:(0,p.jsx)(K,{mode:i.df.create})}),(0,p.jsx)(n.AW,{path:"/view/:id",element:(0,p.jsx)(K,{mode:i.df.view})}),(0,p.jsx)(n.AW,{path:"/edit/:id",element:(0,p.jsx)(K,{mode:i.df.edit})}),(0,p.jsx)(n.AW,{path:"*",element:(0,p.jsx)(n.Fg,{to:r.Z6.invoices.path,replace:!0})})]})},7195:(e,l,t)=>{"use strict";t.d(l,{Z:()=>o});t(2791);var s=t(8870),n=t(3967),r=t(890),i=t(3394),a=t(184);const o=e=>{let{text:l,...t}=e;const{palette:{info:{contrastText:o}}}=(0,n.Z)(),{t:d}=(0,i.$G)(),c=l||d("COMMON.NO_DATA");return(0,a.jsx)(s.Z,{display:"flex",justifyContent:"center",...t,sx:{width:"100%",...t.sx},children:(0,a.jsx)(r.Z,{noWrap:!0,color:o,fontSize:{sm:18,xs:16},children:c})})}},7497:(e,l,t)=>{"use strict";t.d(l,{Z:()=>h});t(2791);var s,n=t(1134),r=t(7071),i=t(8870),a=t(3967),o=t(168),d=t(225),c=t(3006);const x=(0,d.Z)(c.Z)(s||(s=(0,o.Z)(["\n  &.MuiInputBase-input {\n    border-color: ",";\n    color: ",";\n  },\n  &.MuiOutlinedInput-root {\n    &.Mui-error {\n      & .MuiOutlinedInput-notchedOutline: {\n        border-color: ",",\n      }\n    }\n    border-color: ",";\n    color: ",";\n  }\n"])),(e=>e.theme.palette.primary.main),(e=>e.theme.palette.primary.main),(e=>e.theme.palette.error.main),(e=>e.theme.palette.primary.main),(e=>e.theme.palette.error.main));var u=t(184);const h=e=>{let{name:l,rules:t={},...s}=e;const o=(0,a.Z)(),{control:d,formState:{errors:c}}=(0,n.Gc)();return(0,u.jsx)(n.Qr,{control:d,name:l,rules:t,render:e=>{let{field:t,fieldState:{error:n}}=e;return(0,u.jsxs)(i.Z,{position:"relative",children:[(0,u.jsx)(x,{fullWidth:!0,...t,...s,theme:o,error:!!c[l]}),c[l]&&(0,u.jsx)(r.Z,{sx:{position:"absolute"},error:!0,children:null===n||void 0===n?void 0:n.message})]})}})}},1890:(e,l,t)=>{"use strict";t.d(l,{Z:()=>d});t(2791);var s=t(1134),n=t(7198),r=t(7071),i=t(8870),a=t(4925),o=t(184);const d=e=>{let{name:l,label:t,rules:d={},children:c,...x}=e;const{control:u,formState:{errors:h}}=(0,s.Gc)();return(0,o.jsx)(s.Qr,{control:u,name:l,rules:d,render:e=>{let{field:s,fieldState:{error:d}}=e;return(0,o.jsxs)(i.Z,{position:"relative",children:[(0,o.jsx)(a.Z,{children:t}),(0,o.jsx)(n.Z,{fullWidth:!0,variant:"outlined",error:!!h[l],...s,...x,children:c}),h[l]&&(0,o.jsx)(r.Z,{sx:{position:"absolute"},error:!0,children:null===d||void 0===d?void 0:d.message})]})}})}},4372:(e,l,t)=>{"use strict";t.d(l,{Z:()=>i});t(2791);var s=t(7047),n=t(1889),r=t(184);const i=e=>{let{type:l,...t}=e;const i="form"===l,a=()=>{switch(l){case"list":default:return{firstBar:40,secondBar:40,thirdBar:40};case"form":return{firstBar:56,secondBar:56,thirdBar:56};case"summary":return{firstBar:30,secondBar:60,thirdBar:120};case"circular":return{firstBar:64,secondBar:64,thirdBar:64}}};return"circular"===l?(0,r.jsxs)(n.ZP,{container:!0,columnGap:4,rowGap:4,children:[(0,r.jsx)(n.ZP,{item:!0,width:100,display:"flex",justifyContent:"center",children:(0,r.jsx)(s.Z,{...t,variant:"circular",height:a().firstBar,width:a().firstBar})}),(0,r.jsx)(n.ZP,{item:!0,width:100,display:"flex",justifyContent:"center",children:(0,r.jsx)(s.Z,{...t,variant:"circular",height:a().secondBar,width:a().secondBar})}),(0,r.jsx)(n.ZP,{item:!0,width:100,display:"flex",justifyContent:"center",children:(0,r.jsx)(s.Z,{...t,variant:"circular",height:a().thirdBar,width:a().firstBar})})]}):(0,r.jsxs)(n.ZP,{container:!0,justifyContent:"center",rowGap:i?5:2,children:[(0,r.jsx)(n.ZP,{item:!0,xs:12,children:(0,r.jsx)(s.Z,{...t,variant:"rounded",height:a().firstBar})}),(0,r.jsx)(n.ZP,{item:!0,xs:12,children:(0,r.jsx)(s.Z,{...t,variant:"rounded",animation:"wave",height:a().secondBar})}),(0,r.jsx)(n.ZP,{item:!0,xs:12,children:(0,r.jsx)(s.Z,{...t,variant:"rounded",height:a().thirdBar})})]})}},7034:(e,l,t)=>{"use strict";t.d(l,{Z:()=>i});t(2791);var s=t(9658),n=t(3543),r=t(184);const i=e=>{let{open:l=!1,text:t,type:i,onClose:a,...o}=e;return(0,r.jsx)(n.Z,{open:l,autoHideDuration:5e3,onClose:()=>{a()},...o,children:(0,r.jsx)(s.Z,{severity:i,children:t})})}},2480:()=>{}}]);
//# sourceMappingURL=300.b696d89b.chunk.js.map