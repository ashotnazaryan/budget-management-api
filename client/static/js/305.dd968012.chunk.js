"use strict";(self.webpackChunkbudget_management=self.webpackChunkbudget_management||[]).push([[305],{3305:function(e,n,t){t.r(n),t.d(n,{default:function(){return _}});var a=t(2791),i=t(7689),o=t(5980),r=t(2385),s=t(1413),l=t(1889),c=t(9276),d=t(4102),u=t(8112),x=t(7931),m=t(4372),f=t(5900),Z=t(7195),h=t(5527),p=t(890),j=t(3967),v=t(6606),y=t(6581),C=t(184),g=function(e){var n=e.data,t=e.onClick,a=(0,j.Z)().palette,i=a.primary,s=i.main,c=i.contrastText,d=a.error,u=n.name,x=n.icon,m=n.accountName,f=n.accountIcon,Z=n.createdAt,g=n.amount,T=n.type,A=(0,v.Z)(Z).format(o.zT);return(0,C.jsx)(h.Z,{elevation:1,sx:{paddingX:2,backgroundColor:s},onClick:function(){t&&t(n)},children:(0,C.jsxs)(l.ZP,{container:!0,columnSpacing:2,alignItems:"center",sx:{minHeight:40,cursor:"pointer"},children:[(0,C.jsx)(l.ZP,{item:!0,xs:1,display:"flex",children:x&&(0,C.jsx)(y.Z,{name:x,sx:{color:c,fontSize:{sm:22,xs:18}}})}),(0,C.jsx)(l.ZP,{item:!0,xs:3,children:(0,C.jsx)(p.Z,{noWrap:!0,color:c,children:u})}),(0,C.jsx)(l.ZP,{item:!0,xs:2,display:"flex",justifyContent:"flex-end",children:(0,C.jsx)(p.Z,{noWrap:!0,color:T===r.a9.expense?d.main:c,children:g})}),(0,C.jsx)(l.ZP,{item:!0,xs:2,display:"flex",justifyContent:"flex-end",children:(0,C.jsx)(p.Z,{noWrap:!0,color:c,children:m})}),(0,C.jsx)(l.ZP,{item:!0,xs:1,display:"flex",children:f&&(0,C.jsx)(y.Z,{name:f,color:"primary",sx:{fontSize:{sm:22,xs:18},color:c}})}),(0,C.jsx)(l.ZP,{item:!0,xs:3,display:"flex",justifyContent:"flex-end",children:(0,C.jsx)(p.Z,{noWrap:!0,color:c,children:A})})]})})},T=function(){var e=(0,u.TL)(),n=(0,u.CG)(x.Bt),t=n.transactions,r=n.status,h=(0,i.s0)(),p=(0,d.$G)().t;a.useEffect((function(){"idle"===r&&e((0,x.f1)())}),[e,r]);var j=function(e){var n=e.id,t=e.name;h("".concat(o.Z6.transactions.path,"/view/").concat(t),{state:{id:n}})};return(0,C.jsxs)(c.Z,{flexGrow:1,children:[(0,C.jsx)(f.Z,{text:p("TRANSACTIONS.PAGE_TITLE")}),(0,C.jsx)(l.ZP,{container:!0,rowGap:2,children:"loading"===r?(0,C.jsx)(l.ZP,{item:!0,xs:12,children:(0,C.jsx)(m.Z,{type:"list"})}):"failed"!==r&&"succeeded"!==r||null!==t&&void 0!==t&&t.length?(0,C.jsx)(C.Fragment,{children:t.map((function(e){return(0,C.jsx)(l.ZP,{item:!0,xs:12,children:(0,C.jsx)(g,{data:(n=e,(0,s.Z)((0,s.Z)({},n),{},{name:n.nameKey?p(n.nameKey):n.name,accountName:n.accountNameKey?p(n.accountNameKey):n.accountName})),onClick:j})},e.id);var n}))}):(0,C.jsx)(l.ZP,{item:!0,xs:12,children:(0,C.jsx)(Z.Z,{text:p("TRANSACTIONS.EMPTY_TEXT")})})})]})},A=t(9439),N=t(1134),V=t(8870),E=t(5022),O=t(7233),b=t(7497),I=t(1634),S=t(7034),P=t(8692),G=t(645),w=t(1890),M=t(7730),k=t(9525),B=t(7559),R=t(8556),W=function(e){var n=e.mode,t=o.a,c=o.G7,h=(0,u.TL)(),y=(0,i.s0)(),g=(0,i.TH)().state,T=(0,u.CG)(x.uY).categories,W=(0,u.CG)(x.Jp),_=(0,u.CG)(x.Bt),D=_.getStatus,K=_.createEditStatus,L=_.deleteStatus,q=(0,u.CG)(x.w2),Y=(0,u.CG)(x.bk).accounts,z=(0,u.CG)(x.en),F=(0,u.CG)(x.vi).defaultAccount,Q=void 0===F?"":F,X=(0,u.CG)(x.yR),H=(0,j.Z)().palette.info.contrastText,U=(0,O.Lt)(),$=(0,d.$G)().t,J=a.useState(!1),ee=(0,A.Z)(J,2),ne=ee[0],te=ee[1],ae=a.useState(!1),ie=(0,A.Z)(ae,2),oe=ie[0],re=ie[1],se=a.useState(!1),le=(0,A.Z)(se,2),ce=le[0],de=le[1],ue=a.useState(!1),xe=(0,A.Z)(ue,2),me=xe[0],fe=xe[1],Ze="loading"===K,he="loading"===L,pe=null===g||void 0===g?void 0:g.id,je=null!==X&&void 0!==X&&X.nameKey?$(X.nameKey):(null===X||void 0===X?void 0:X.name)||"",ve=(null===g||void 0===g?void 0:g.categoryType)||r.a9.expense,ye=n===r.df.create,Ce=n===r.df.edit,ge=n===r.df.view,Te=(0,O.pz)(n,$,D,"TRANSACTIONS","NEW_TRANSACTION","EMPTY_TITLE",X),Ae={amount:"",categoryId:"",accountId:Q||"",type:String(ve),createdAt:ye?(0,v.Z)().format():void 0,note:""},Ne=(0,N.cI)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:Ae}),Ve=Ne.setValue,Ee=Ne.handleSubmit,Oe=Ne.watch,be=Ne.reset,Ie=Oe(r.Vn.type),Se=Oe(r.Vn.accountId),Pe=Oe(r.Vn.createdAt),Ge=function(e){var n=Number(e);Ve(r.Vn.type,n,{shouldValidate:!0}),Ve(r.Vn.categoryId,Ae.categoryId),Ve(r.Vn.icon,Ae.icon),Ve(r.Vn.name,Ae.name)},we=function(e){var n=e.id,t=e.name,a=e.nameKey,i=e.icon;ge||(Ve(r.Vn.categoryId,n,{shouldValidate:!0}),Ve(r.Vn.icon,i),Ve(r.Vn.name,t,{shouldValidate:!0}),Ve("nameKey",a))},Me=function(e){Ve(r.Vn.accountId,e.target.value,{shouldValidate:!0})},ke=function(e){Ve(r.Vn.createdAt,e.format(),{shouldValidate:!0})},Be=function(e){var n=(0,s.Z)((0,s.Z)({},e),{},{amount:Number(e.amount),type:Number(e.type),createdAt:(0,v.Z)(e.createdAt).toDate()});h(Ce?(0,x.vF)([pe,n]):(0,x.dT)(n)),te(!0)},Re=a.useCallback((function(){X&&(Ve(r.Vn.categoryId,X.categoryId),Ve(r.Vn.accountId,X.accountId),Ve(r.Vn.icon,X.icon),Ve(r.Vn.amount,(0,O.Co)(X.amount)),Ve(r.Vn.type,String(X.type)),Ve(r.Vn.createdAt,X.createdAt),Ve(r.Vn.note,X.note),Ve("name",X.name))}),[X,Ve]),We=a.useCallback((function(){h((0,x.Qr)())}),[h]),_e=a.useCallback((function(){y("".concat(ye?o.Z6.dashboard.path:o.Z6.transactions.path)),We()}),[y,We,ye]);a.useEffect((function(){"idle"===W&&h((0,x.CP)()),"idle"===z&&h((0,x.T8)())}),[h,W,z]),a.useEffect((function(){"succeeded"===K&&ne&&(_e(),de(!1),h((0,x.T8)())),"failed"===K&&ne&&de(!0)}),[h,_e,K,ne]),a.useEffect((function(){"succeeded"===L&&oe&&_e(),"failed"===L&&oe&&(de(!0),fe(!1))}),[_e,L,oe]),a.useEffect((function(){pe||h((0,x.i1)())}),[pe,h]),a.useEffect((function(){!pe||"idle"!==D||ye||oe||h((0,x.fo)(pe))}),[pe,ye,D,h,oe]),a.useEffect((function(){Ve(r.Vn.accountId,Q)}),[Ve,Q]),a.useEffect((function(){Re()}),[Re]),a.useEffect((function(){return function(){We()}}),[We]);return(0,C.jsxs)(V.Z,{component:"form",display:"flex",flexDirection:"column",flexGrow:1,onSubmit:Ee(Be),children:[(0,C.jsx)(f.Z,{withBackButton:!0,withEditButton:ge&&!!X,withDeleteButton:Ce&&!!X,withCancelButton:!ge&&!!X,text:Te,onBackButtonClick:_e,onEditButtonClick:function(){Ce||y("".concat(o.Z6.transactions.path,"/edit/").concat(je),{state:{id:pe}})},onDeleteButtonClick:function(){fe(!0)},onCancelButtonClick:function(){ye?be(Ae):Re(),ye?y(o.Z6.dashboard.path):y("".concat(o.Z6.transactions.path,"/view/").concat(je),{state:{id:pe}})}}),(0,C.jsx)(V.Z,{flexGrow:1,children:"loading"===D?(0,C.jsx)(m.Z,{type:"form"}):ye||X&&pe||"failed"!==D?(0,C.jsx)(N.RV,(0,s.Z)((0,s.Z)({},Ne),{},{children:(0,C.jsxs)(l.ZP,{container:!0,rowGap:7,children:[(0,C.jsxs)(l.ZP,{item:!0,xs:12,children:[(0,C.jsx)(p.Z,{color:H,children:$("COMMON.TYPE")}),(0,C.jsx)(M.Z,{readonly:ge,name:r.Vn.type,rules:{required:{value:!0,message:$(U.type.required.message)}},options:(0,O.hf)(c,$),labelColor:H,value:Ie,onRadioChange:Ge})]}),(0,C.jsx)(l.ZP,{item:!0,xs:12,children:(0,C.jsx)(b.Z,{InputProps:{readOnly:ge},label:$("COMMON.AMOUNT"),type:"number",name:r.Vn.amount,rules:{required:{value:!0,message:$(U.amount.required.message)},pattern:{value:t,message:$(U.amount.pattern.message)}}})}),(0,C.jsx)(l.ZP,{item:!0,xs:12,children:(0,C.jsx)(w.Z,{inputProps:{readOnly:ge},label:$("COMMON.ACCOUNT"),name:r.Vn.accountId,value:Y.length?Se||Q:"",onChange:Me,rules:{required:{value:!0,message:$(U.accountId.required.message)}},renderValue:function(e){return(0,C.jsx)(p.Z,{children:(0,O.ut)(e,Y,$)})},children:Y.map((function(e){return(0,C.jsx)(E.Z,{value:e.id,sx:{display:"flex",justifyContent:"space-between"},children:(0,C.jsx)(B.Z,{data:e})},e.id)}))})}),(0,C.jsx)(l.ZP,{item:!0,xs:12,children:(0,C.jsx)(G.Z,{readOnly:ge,name:r.Vn.createdAt,label:$("COMMON.DATE"),value:(0,v.Z)(Pe).isValid()?(0,v.Z)(Pe):null,maxDate:(0,v.Z)(),rules:{required:!0,validate:{maxDate:function(e){return Promise.resolve((0,v.Z)(e)<=(0,v.Z)()||$(U.createdAt.max.message))}}},onChange:ke,sx:{width:"100%"}})}),(0,C.jsx)(l.ZP,{item:!0,xs:12,children:(0,C.jsx)(b.Z,{inputProps:{readOnly:ge},label:$("COMMON.NOTE"),name:r.Vn.note})}),(0,C.jsx)(l.ZP,{item:!0,xs:12,children:(0,C.jsx)(R.Z,{name:r.Vn.categoryId,label:$("COMMON.CATEGORY"),rules:{required:{value:!0,message:$(U.categoryId.required.message)}},render:function(e){var n=e.field;return(0,C.jsx)(l.ZP,(0,s.Z)((0,s.Z)({container:!0},n),{},{columnGap:4,rowGap:4,children:T.filter((function(e){return e.type===Number(Ie)})).map((function(e){return(0,C.jsx)(l.ZP,{item:!0,children:(0,C.jsx)(P.Z,{data:(t=e,(0,s.Z)((0,s.Z)({},t),{},{name:t.nameKey?$(t.nameKey):t.name})),selected:n.value,readonly:ge,onItemClick:we})},e.id);var t}))}))}})})]})})):(0,C.jsx)(Z.Z,{text:$("TRANSACTIONS.EMPTY_TEXT_RENDER_CONTENT")})}),!ge&&(0,C.jsx)(l.ZP,{container:!0,display:"flex",justifyContent:"flex-end",rowGap:2,columnGap:2,sx:{marginTop:4},children:(0,C.jsx)(l.ZP,{item:!0,sm:"auto",xs:12,children:(0,C.jsx)(I.Z,{"aria-label":"Save transaction",fullWidth:!0,type:"submit",variant:"contained",loading:Ze,onClick:Ee(Be),children:$("COMMON.SAVE")})})}),(0,C.jsx)(S.Z,{type:"error",open:ce,text:null!==q&&void 0!==q&&q.messageKey?$(q.messageKey):(null===q||void 0===q?void 0:q.message)||"",onClose:function(){de(!1),re(!1)}}),(0,C.jsx)(k.Z,{fullWidth:!0,maxWidth:"xs",title:$("TRANSACTIONS.DELETE_DIALOG_TITLE"),actionButtonText:$("COMMON.YES"),open:me,loading:he,onClose:function(){fe(!1)},onAction:function(){h((0,x.Ks)(pe)),re(!0)},children:(0,C.jsx)(p.Z,{variant:"subtitle1",children:$("TRANSACTIONS.DELETE_DIALOG_CONFIRM")})})]})},_=function(){return(0,C.jsxs)(i.Z5,{children:[(0,C.jsx)(i.AW,{path:"/",element:(0,C.jsx)(T,{})}),(0,C.jsx)(i.AW,{path:"/new",element:(0,C.jsx)(W,{mode:r.df.create})}),(0,C.jsx)(i.AW,{path:"/view/:id",element:(0,C.jsx)(W,{mode:r.df.view})}),(0,C.jsx)(i.AW,{path:"/edit/:id",element:(0,C.jsx)(W,{mode:r.df.edit})}),(0,C.jsx)(i.AW,{path:"*",element:(0,C.jsx)(i.Fg,{to:o.Z6.accounts.path,replace:!0})})]})}},645:function(e,n,t){var a=t(1413),i=t(5987),o=(t(2791),t(1134)),r=t(8870),s=t(4925),l=t(7071),c=t(9617),d=t(1652),u=t(7792),x=t(5866),m=t(184),f=["name","label","rules"];n.Z=function(e){var n=e.name,t=e.label,Z=e.rules,h=void 0===Z?{}:Z,p=(0,i.Z)(e,f),j=(0,o.Gc)(),v=j.control,y=j.formState.errors;return(0,m.jsx)(d._,{dateAdapter:u.y,children:(0,m.jsx)(x.C,{sx:(0,a.Z)((0,a.Z)({},p.sx),{},{paddingTop:2,overflow:"initial"}),components:["DatePicker"],children:(0,m.jsx)(o.Qr,{control:v,name:n,rules:h,render:function(e){var i=e.field,o=e.fieldState.error;return(0,m.jsxs)(r.Z,{position:"relative",sx:{width:"100%"},children:[(0,m.jsx)(s.Z,{children:t}),(0,m.jsx)(c.M,(0,a.Z)((0,a.Z)({},i),p)),y[n]&&(0,m.jsx)(l.Z,{sx:{position:"absolute"},error:!0,children:null===o||void 0===o?void 0:o.message})]})}})})})}},1890:function(e,n,t){var a=t(1413),i=t(5987),o=(t(2791),t(1134)),r=t(7198),s=t(7071),l=t(8870),c=t(4925),d=t(184),u=["name","label","rules","children"];n.Z=function(e){var n=e.name,t=e.label,x=e.rules,m=void 0===x?{}:x,f=e.children,Z=(0,i.Z)(e,u),h=(0,o.Gc)(),p=h.control,j=h.formState.errors;return(0,d.jsx)(o.Qr,{control:p,name:n,rules:m,render:function(e){var i=e.field,o=e.fieldState.error;return(0,d.jsxs)(l.Z,{position:"relative",children:[(0,d.jsx)(c.Z,{children:t}),(0,d.jsx)(r.Z,(0,a.Z)((0,a.Z)((0,a.Z)({fullWidth:!0,variant:"outlined",error:!!j[n]},i),Z),{},{children:f})),j[n]&&(0,d.jsx)(s.Z,{sx:{position:"absolute"},error:!0,children:null===o||void 0===o?void 0:o.message})]})}})}}}]);
//# sourceMappingURL=305.dd968012.chunk.js.map