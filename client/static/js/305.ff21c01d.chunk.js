"use strict";(self.webpackChunkbudget_management=self.webpackChunkbudget_management||[]).push([[305],{3305:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var a=n(2791),s=n(7689),o=n(56),i=n(2385),l=n(1889),r=n(9276),d=n(3394),c=n(8112),u=n(7931),x=n(4631),m=n(5900),h=n(7195),p=n(5527),j=n(890),f=n(3967),Z=n(6606),y=n(6581),C=n(184);const g=e=>{let{data:t,onClick:n}=e;const{palette:{primary:{main:a,contrastText:s},error:r}}=(0,f.Z)(),{name:d,icon:c,accountName:u,accountIcon:x,createdAt:m,amount:h,type:g}=t,T=(0,Z.Z)(m).format(o.zT);return(0,C.jsx)(p.Z,{elevation:1,sx:{paddingX:2,backgroundColor:a},onClick:()=>{n&&n(t)},children:(0,C.jsxs)(l.ZP,{container:!0,columnSpacing:2,alignItems:"center",sx:{minHeight:40,cursor:"pointer"},children:[(0,C.jsx)(l.ZP,{item:!0,xs:1,display:"flex",children:c&&(0,C.jsx)(y.Z,{name:c,sx:{color:s,fontSize:{sm:22,xs:18}}})}),(0,C.jsx)(l.ZP,{item:!0,xs:3,children:(0,C.jsx)(j.Z,{noWrap:!0,color:s,sx:{fontSize:{sm:15,xs:13}},children:d})}),(0,C.jsx)(l.ZP,{item:!0,xs:2,display:"flex",justifyContent:"flex-end",children:(0,C.jsx)(j.Z,{noWrap:!0,color:g===i.a9.expense?r.main:s,sx:{fontSize:{sm:15,xs:13}},children:h})}),(0,C.jsx)(l.ZP,{item:!0,xs:2,display:"flex",justifyContent:"flex-end",children:(0,C.jsx)(j.Z,{noWrap:!0,color:s,sx:{fontSize:{sm:15,xs:13}},children:u})}),(0,C.jsx)(l.ZP,{item:!0,xs:1,display:"flex",children:x&&(0,C.jsx)(y.Z,{name:x,color:"primary",sx:{fontSize:{sm:22,xs:18},color:s}})}),(0,C.jsx)(l.ZP,{item:!0,xs:3,display:"flex",justifyContent:"flex-end",children:(0,C.jsx)(j.Z,{noWrap:!0,color:s,sx:{fontSize:{sm:15,xs:13}},children:T})})]})})},T=()=>{const e=(0,c.TL)(),{transactions:t,status:n}=(0,c.CG)(u.Bt),i=(0,s.s0)(),{t:p}=(0,d.$G)();a.useEffect((()=>{"idle"===n&&e((0,u.f1)())}),[e,n]);const j=e=>{let{id:t,name:n}=e;i("".concat(o.Z6.transactions.path,"/view/").concat(n),{state:{id:t}})};return(0,C.jsxs)(r.Z,{flexGrow:1,children:[(0,C.jsx)(m.Z,{text:p("TRANSACTIONS.PAGE_TITLE")}),(0,C.jsx)(l.ZP,{container:!0,rowGap:2,children:"loading"===n?(0,C.jsx)(l.ZP,{item:!0,xs:12,children:(0,C.jsx)(x.Z,{type:"list"})}):"failed"!==n&&"succeeded"!==n||null!==t&&void 0!==t&&t.length?(0,C.jsx)(C.Fragment,{children:t.map((e=>{return(0,C.jsx)(l.ZP,{item:!0,xs:12,children:(0,C.jsx)(g,{data:(t=e,{...t,name:t.nameKey?p(t.nameKey):t.name,accountName:t.accountNameKey?p(t.accountNameKey):t.accountName}),onClick:j})},e.id);var t}))}):(0,C.jsx)(l.ZP,{item:!0,xs:12,children:(0,C.jsx)(h.Z,{text:p("TRANSACTIONS.EMPTY_TEXT")})})})]})};var v=n(1134),A=n(8870),N=n(5022),V=n(5715),E=n(7497),S=n(1634),O=n(7034),I=n(8692),P=n(645),b=n(1890),G=n(7730),w=n(9525),M=n(7559),k=n(8556);const B=e=>{let{mode:t}=e;const n=o.a,r=o.G7,p=(0,c.TL)(),y=(0,s.s0)(),{state:g}=(0,s.TH)(),{categories:T}=(0,c.CG)(u.uY),B=(0,c.CG)(u.Jp),{getStatus:R,createEditStatus:_,deleteStatus:D}=(0,c.CG)(u.Bt),K=(0,c.CG)(u.w2),{accounts:W}=(0,c.CG)(u.bk),L=(0,c.CG)(u.en),{defaultAccount:q=""}=(0,c.CG)(u.vi),z=(0,c.CG)(u.yR),{palette:{info:{contrastText:Y}}}=(0,f.Z)(),F=(0,V.Lt)(),{t:X}=(0,d.$G)(),[H,Q]=a.useState(!1),[U,$]=a.useState(!1),[J,ee]=a.useState(!1),[te,ne]=a.useState(!1),ae="loading"===_,se="loading"===D,oe=null===g||void 0===g?void 0:g.id,ie=null!==z&&void 0!==z&&z.nameKey?X(z.nameKey):(null===z||void 0===z?void 0:z.name)||"",le=(null===g||void 0===g?void 0:g.categoryType)||i.a9.expense,re=t===i.df.create,de=t===i.df.edit,ce=t===i.df.view,ue=(0,V.pz)(t,X,R,"TRANSACTIONS","NEW_TRANSACTION","EMPTY_TITLE",z),xe={amount:"",categoryId:"",accountId:q||"",type:String(le),createdAt:re?(0,Z.Z)().format():void 0,note:""},me=(0,v.cI)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:xe}),{setValue:he,handleSubmit:pe,watch:je,reset:fe}=me,Ze=je(i.Vn.type),ye=je(i.Vn.accountId),Ce=je(i.Vn.createdAt),ge=e=>{const t=Number(e);he(i.Vn.type,t,{shouldValidate:!0}),he(i.Vn.categoryId,xe.categoryId),he(i.Vn.icon,xe.icon),he(i.Vn.name,xe.name)},Te=e=>{let{id:t,name:n,nameKey:a,icon:s}=e;ce||(he(i.Vn.categoryId,t,{shouldValidate:!0}),he(i.Vn.icon,s),he(i.Vn.name,n,{shouldValidate:!0}),he("nameKey",a))},ve=e=>{he(i.Vn.accountId,e.target.value,{shouldValidate:!0})},Ae=e=>{he(i.Vn.createdAt,e.format(),{shouldValidate:!0})},Ne=e=>{const t={...e,amount:Number(e.amount),type:Number(e.type),createdAt:(0,Z.Z)(e.createdAt).toDate()};p(de?(0,u.vF)([oe,t]):(0,u.dT)(t)),Q(!0)},Ve=a.useCallback((()=>{z&&(he(i.Vn.categoryId,z.categoryId),he(i.Vn.accountId,z.accountId),he(i.Vn.icon,z.icon),he(i.Vn.amount,(0,V.Co)(z.amount)),he(i.Vn.type,String(z.type)),he(i.Vn.createdAt,z.createdAt),he(i.Vn.note,z.note),he("name",z.name))}),[z,he]),Ee=a.useCallback((()=>{p((0,u.Qr)())}),[p]),Se=a.useCallback((()=>{y("".concat(re?o.Z6.dashboard.path:o.Z6.transactions.path)),Ee()}),[y,Ee,re]);a.useEffect((()=>{"idle"===B&&p((0,u.CP)()),"idle"===L&&p((0,u.T8)())}),[p,B,L]),a.useEffect((()=>{"succeeded"===_&&H&&(Se(),ee(!1),p((0,u.T8)())),"failed"===_&&H&&ee(!0)}),[p,Se,_,H]),a.useEffect((()=>{"succeeded"===D&&U&&Se(),"failed"===D&&U&&(ee(!0),ne(!1))}),[Se,D,U]),a.useEffect((()=>{oe||p((0,u.i1)())}),[oe,p]),a.useEffect((()=>{!oe||"idle"!==R||re||U||p((0,u.fo)(oe))}),[oe,re,R,p,U]),a.useEffect((()=>{he(i.Vn.accountId,q)}),[he,q]),a.useEffect((()=>{Ve()}),[Ve]),a.useEffect((()=>()=>{Ee()}),[Ee]);return(0,C.jsxs)(A.Z,{component:"form",display:"flex",flexDirection:"column",flexGrow:1,onSubmit:pe(Ne),children:[(0,C.jsx)(m.Z,{withBackButton:!0,withEditButton:ce&&!!z,withDeleteButton:de&&!!z,withCancelButton:!ce&&!!z,text:ue,onBackButtonClick:Se,onEditButtonClick:()=>{de||y("".concat(o.Z6.transactions.path,"/edit/").concat(ie),{state:{id:oe}})},onDeleteButtonClick:()=>{ne(!0)},onCancelButtonClick:()=>{re?fe(xe):Ve(),re?y(o.Z6.dashboard.path):y("".concat(o.Z6.transactions.path,"/view/").concat(ie),{state:{id:oe}})}}),(0,C.jsx)(A.Z,{flexGrow:1,children:"loading"===R?(0,C.jsx)(x.Z,{type:"form"}):re||z&&oe||"failed"!==R?(0,C.jsx)(v.RV,{...me,children:(0,C.jsxs)(l.ZP,{container:!0,rowGap:7,children:[(0,C.jsxs)(l.ZP,{item:!0,xs:12,children:[(0,C.jsx)(j.Z,{color:Y,children:X("COMMON.TYPE")}),(0,C.jsx)(G.Z,{readonly:ce,name:i.Vn.type,rules:{required:{value:!0,message:X(F.type.required.message)}},options:(0,V.hf)(r,X),labelColor:Y,value:Ze,onRadioChange:ge})]}),(0,C.jsx)(l.ZP,{item:!0,xs:12,children:(0,C.jsx)(E.Z,{InputProps:{readOnly:ce},label:X("COMMON.AMOUNT"),type:"number",name:i.Vn.amount,rules:{required:{value:!0,message:X(F.amount.required.message)},pattern:{value:n,message:X(F.amount.pattern.message)}}})}),(0,C.jsx)(l.ZP,{item:!0,xs:12,children:(0,C.jsx)(b.Z,{inputProps:{readOnly:ce},label:X("COMMON.ACCOUNT"),name:i.Vn.accountId,value:W.length?ye||q:"",onChange:ve,rules:{required:{value:!0,message:X(F.accountId.required.message)}},renderValue:e=>(0,C.jsx)(j.Z,{children:(0,V.ut)(e,W,X)}),children:W.map((e=>(0,C.jsx)(N.Z,{value:e.id,sx:{display:"flex",justifyContent:"space-between"},children:(0,C.jsx)(M.Z,{data:e})},e.id)))})}),(0,C.jsx)(l.ZP,{item:!0,xs:12,children:(0,C.jsx)(P.Z,{readOnly:ce,name:i.Vn.createdAt,label:X("COMMON.DATE"),value:(0,Z.Z)(Ce).isValid()?(0,Z.Z)(Ce):null,maxDate:(0,Z.Z)(),rules:{required:!0,validate:{maxDate:e=>Promise.resolve((0,Z.Z)(e)<=(0,Z.Z)()||X(F.createdAt.max.message))}},onChange:Ae,sx:{width:"100%"}})}),(0,C.jsx)(l.ZP,{item:!0,xs:12,children:(0,C.jsx)(E.Z,{inputProps:{readOnly:ce},label:X("COMMON.NOTE"),name:i.Vn.note})}),(0,C.jsx)(l.ZP,{item:!0,xs:12,children:(0,C.jsx)(k.Z,{name:i.Vn.categoryId,label:X("COMMON.CATEGORY"),rules:{required:{value:!0,message:X(F.categoryId.required.message)}},render:e=>{let{field:t}=e;return(0,C.jsx)(l.ZP,{container:!0,...t,columnGap:4,rowGap:4,children:T.filter((e=>{let{type:t}=e;return t===Number(Ze)})).map((e=>{return(0,C.jsx)(l.ZP,{item:!0,children:(0,C.jsx)(I.Z,{data:(n=e,{...n,name:n.nameKey?X(n.nameKey):n.name}),selected:t.value,readonly:ce,onItemClick:Te})},e.id);var n}))})}})})]})}):(0,C.jsx)(h.Z,{text:X("TRANSACTIONS.EMPTY_TEXT_RENDER_CONTENT")})}),!ce&&(0,C.jsx)(l.ZP,{container:!0,display:"flex",justifyContent:"flex-end",rowGap:2,columnGap:2,sx:{marginTop:4,marginBottom:4},children:(0,C.jsx)(l.ZP,{item:!0,sm:"auto",xs:12,children:(0,C.jsx)(S.Z,{"aria-label":"Save transaction",fullWidth:!0,type:"submit",variant:"contained",loading:ae,onClick:pe(Ne),children:X("COMMON.SAVE")})})}),(0,C.jsx)(O.Z,{type:"error",open:J,text:null!==K&&void 0!==K&&K.messageKey?X(K.messageKey):(null===K||void 0===K?void 0:K.message)||"",onClose:()=>{ee(!1),$(!1)}}),(0,C.jsx)(w.Z,{fullWidth:!0,maxWidth:"xs",title:X("TRANSACTIONS.DELETE_DIALOG_TITLE"),actionButtonText:X("COMMON.YES"),open:te,loading:se,onClose:()=>{ne(!1)},onAction:()=>{p((0,u.Ks)(oe)),$(!0)},children:(0,C.jsx)(j.Z,{variant:"subtitle1",children:X("TRANSACTIONS.DELETE_DIALOG_CONFIRM")})})]})},R=()=>(0,C.jsxs)(s.Z5,{children:[(0,C.jsx)(s.AW,{path:"/",element:(0,C.jsx)(T,{})}),(0,C.jsx)(s.AW,{path:"/new",element:(0,C.jsx)(B,{mode:i.df.create})}),(0,C.jsx)(s.AW,{path:"/view/:id",element:(0,C.jsx)(B,{mode:i.df.view})}),(0,C.jsx)(s.AW,{path:"/edit/:id",element:(0,C.jsx)(B,{mode:i.df.edit})}),(0,C.jsx)(s.AW,{path:"*",element:(0,C.jsx)(s.Fg,{to:o.Z6.accounts.path,replace:!0})})]})},645:(e,t,n)=>{n.d(t,{Z:()=>x});n(2791);var a=n(1134),s=n(8870),o=n(4925),i=n(7071),l=n(9617),r=n(1652),d=n(7792),c=n(5866),u=n(184);const x=e=>{let{name:t,label:n,rules:x={},...m}=e;const{control:h,formState:{errors:p}}=(0,a.Gc)();return(0,u.jsx)(r._,{dateAdapter:d.y,children:(0,u.jsx)(c.C,{sx:{...m.sx,paddingTop:2,overflow:"initial"},components:["DatePicker"],children:(0,u.jsx)(a.Qr,{control:h,name:t,rules:x,render:e=>{let{field:a,fieldState:{error:r}}=e;return(0,u.jsxs)(s.Z,{position:"relative",sx:{width:"100%"},children:[(0,u.jsx)(o.Z,{children:n}),(0,u.jsx)(l.M,{...a,...m}),p[t]&&(0,u.jsx)(i.Z,{sx:{position:"absolute"},error:!0,children:null===r||void 0===r?void 0:r.message})]})}})})})}}}]);
//# sourceMappingURL=305.ff21c01d.chunk.js.map