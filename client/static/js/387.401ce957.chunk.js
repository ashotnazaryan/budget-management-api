"use strict";(self.webpackChunkbudget_management=self.webpackChunkbudget_management||[]).push([[387],{2387:(e,t,n)=>{n.r(t),n.d(t,{default:()=>G});var s=n(2791),a=n(7689),o=n(56),r=n(2385),c=n(1134),l=n(6606),i=n(3394),d=n(8870),u=n(1889),x=n(890),m=n(5022),f=n(8112),h=n(7931),j=n(5715),Z=n(5900),p=n(1634),C=n(1890),A=n(7497),E=n(645),T=n(7034),S=n(9525),g=n(4631),v=n(7195),N=n(7559),b=n(184);const R=e=>{let{mode:t}=e;const n=o.a,R=(0,a.s0)(),w=(0,f.TL)(),{getStatus:y,createEditStatus:O,deleteStatus:k}=(0,f.CG)(h.Nu),P=(0,f.CG)(h.xm),G=(0,f.CG)(h.rD),{accounts:_}=(0,f.CG)(h.bk),B=(0,f.CG)(h.en),D=(0,j._N)(),{t:M}=(0,i.$G)(),[W,F]=s.useState(!1),[V,I]=s.useState(!1),[L,q]=s.useState(!1),[z,U]=s.useState(!1),K="loading"===O,H="loading"===k,X=t===r.df.create,Y=t===r.df.edit,$=t===r.df.view,{id:Q}=(0,a.UO)(),J={fromAccount:"",toAccount:"",amount:"",createdAt:X?(0,l.Z)().format():void 0},ee=(0,c.cI)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:J}),{handleSubmit:te,setValue:ne,watch:se,reset:ae}=ee,oe=se(r.Cd.fromAccount),re=se(r.Cd.toAccount),ce=se(r.Cd.createdAt),le=e=>{const t=_.find((t=>{let{id:n}=t;return n===e.target.value}));ne(r.Cd.fromAccount,t,{shouldValidate:!0})},ie=e=>{const t=_.find((t=>{let{id:n}=t;return n===e.target.value}));ne(r.Cd.toAccount,t,{shouldValidate:!0})},de=e=>{ne(r.Cd.createdAt,e.format(),{shouldValidate:!0})},ue=e=>{const t={...e,amount:Number(e.amount),fromAccount:e.fromAccount.id,toAccount:e.toAccount.id,createdAt:(0,l.Z)(e.createdAt).toDate()};w(Y?(0,h.aT)([Q,t]):(0,h.LH)(t)),F(!0)},xe=s.useCallback((()=>{G&&(ne(r.Cd.fromAccount,G.fromAccount),ne(r.Cd.toAccount,G.toAccount),ne(r.Cd.amount,(0,j.Co)(G.amount)),ne(r.Cd.createdAt,G.createdAt))}),[G,ne]),me=s.useCallback((()=>{w((0,h.bW)())}),[w]),fe=s.useCallback((()=>{R(X?o.Z6.accounts.path:o.Z6.transfers.path),me()}),[R,X,me]);s.useEffect((()=>{"idle"===B&&w((0,h.T8)())}),[w,B]),s.useEffect((()=>{"succeeded"===O&&W&&(w((0,h.T8)()),fe(),I(!1)),"failed"===O&&W&&I(!0)}),[w,fe,O,W]),s.useEffect((()=>{"succeeded"===k&&L&&fe(),"failed"===k&&L&&(I(!0),U(!1))}),[fe,k,L]),s.useEffect((()=>{Q||w((0,h.Sf)())}),[Q,w]),s.useEffect((()=>{!Q||"idle"!==y||X||L||w((0,h.x9)(Q))}),[Q,X,y,w,L]),s.useEffect((()=>{xe()}),[xe]),s.useEffect((()=>()=>{me()}),[me]);return(0,b.jsxs)(d.Z,{component:"form",display:"flex",flexDirection:"column",flexGrow:1,onSubmit:te(ue),children:[(0,b.jsx)(Z.Z,{withBackButton:!0,withEditButton:$,withDeleteButton:Y,withCancelButton:!$,text:M(Y?"TRANSFERS.EDIT_TRANSFER":$?"TRANSFERS.VIEW_TRANSFER":"TRANSFERS.NEW_TRANSFER"),onBackButtonClick:fe,onEditButtonClick:()=>{Y||R("".concat(o.Z6.transfers.path,"/edit/").concat(Q))},onDeleteButtonClick:()=>{U(!0)},onCancelButtonClick:()=>{X?ae(J):xe(),R(X?o.Z6.accounts.path:"".concat(o.Z6.transfers.path,"/view/").concat(Q))}}),(0,b.jsx)(d.Z,{flexGrow:1,children:"loading"===y?(0,b.jsx)(g.Z,{type:"form"}):X||G&&Q||"failed"!==y?(0,b.jsx)(c.RV,{...ee,children:(0,b.jsxs)(u.ZP,{container:!0,rowGap:7,columnSpacing:2,children:[(0,b.jsx)(u.ZP,{item:!0,sm:6,xs:12,children:(0,b.jsx)(C.Z,{disabled:!X,label:M("ACCOUNTS.FROM_ACCOUNT"),name:r.Cd.fromAccount,value:oe.id||"",onChange:le,rules:{required:{value:!0,message:M(D.fromAccount.required.message)}},renderValue:e=>(0,b.jsx)(x.Z,{children:(0,j.ut)(e,_,M)}),children:_.map((e=>(0,b.jsx)(m.Z,{value:e.id,sx:{display:"flex",justifyContent:"space-between"},children:(0,b.jsx)(N.Z,{data:e})},e.id)))})}),(0,b.jsx)(u.ZP,{item:!0,sm:6,xs:12,children:(0,b.jsx)(C.Z,{disabled:!X,label:M("ACCOUNTS.TO_ACCOUNT"),name:r.Cd.toAccount,value:re.id||"",onChange:ie,rules:{required:{value:!0,message:M(D.toAccount.required.message)}},renderValue:e=>(0,b.jsx)(x.Z,{children:(0,j.ut)(e,_,M)}),children:_.map((e=>(0,b.jsx)(m.Z,{value:e.id,sx:{display:"flex",justifyContent:"space-between"},children:(0,b.jsx)(N.Z,{data:e})},e.id)))})}),(0,b.jsx)(u.ZP,{item:!0,xs:12,children:(0,b.jsx)(A.Z,{InputProps:{readOnly:$},label:M("COMMON.AMOUNT"),type:"number",name:r.Cd.amount,rules:{required:{value:!0,message:M(D.amount.required.message)},pattern:{value:n,message:M(D.amount.pattern.message)}}})}),(0,b.jsx)(u.ZP,{item:!0,xs:12,children:(0,b.jsx)(E.Z,{readOnly:$,name:r.Cd.createdAt,label:M("COMMON.DATE"),value:(0,l.Z)(ce).isValid()?(0,l.Z)(ce):null,maxDate:(0,l.Z)(),rules:{required:!0,validate:{maxDate:e=>Promise.resolve((0,l.Z)(e)<=(0,l.Z)()||M(D.createdAt.max.message))}},onChange:de,sx:{width:"100%"}})})]})}):(0,b.jsx)(v.Z,{text:M("TRANSFERS.EMPTY_TEXT_RENDER_CONTENT")})}),!$&&(0,b.jsx)(u.ZP,{container:!0,display:"flex",justifyContent:"flex-end",rowGap:2,columnGap:2,sx:{marginTop:4,marginBottom:4},children:(0,b.jsx)(u.ZP,{item:!0,sm:"auto",xs:12,children:(0,b.jsx)(p.Z,{"aria-label":"Save transfer",fullWidth:!0,type:"submit",variant:"contained",loading:K,onClick:te(ue),children:M("COMMON.SAVE")})})}),(0,b.jsx)(T.Z,{type:"error",open:V,text:null!==P&&void 0!==P&&P.messageKey?M(P.messageKey):(null===P||void 0===P?void 0:P.message)||"",onClose:()=>{I(!1),q(!1)}}),(0,b.jsx)(S.Z,{fullWidth:!0,maxWidth:"xs",title:M("TRANSFERS.DELETE_DIALOG_TITLE"),actionButtonText:M("COMMON.YES"),open:z,loading:H,onClose:()=>{U(!1)},onAction:()=>{w((0,h.Wr)(Q)),q(!0)},children:(0,b.jsx)(x.Z,{variant:"subtitle1",children:M("TRANSFERS.DELETE_DIALOG_CONFIRM")})})]})};var w=n(9276),y=n(5527),O=n(3967);const k=e=>{let{data:t,onClick:n}=e;const{palette:{primary:{main:s,contrastText:a}}}=(0,O.Z)(),{fromAccount:r,toAccount:c,createdAt:i,amount:d}=t,m=(0,l.Z)(i).format(o.zT);return(0,b.jsx)(y.Z,{elevation:1,sx:{paddingX:2,backgroundColor:s},onClick:()=>{n&&n(t)},children:(0,b.jsxs)(u.ZP,{container:!0,columnSpacing:2,alignItems:"center",sx:{minHeight:40,cursor:"pointer"},children:[(0,b.jsx)(u.ZP,{item:!0,xs:3,children:(0,b.jsx)(x.Z,{noWrap:!0,color:a,sx:{fontSize:{sm:15,xs:13}},children:r.name})}),(0,b.jsx)(u.ZP,{item:!0,xs:3,children:(0,b.jsx)(x.Z,{noWrap:!0,color:a,sx:{fontSize:{sm:15,xs:13}},children:c.name})}),(0,b.jsx)(u.ZP,{item:!0,xs:3,children:(0,b.jsx)(x.Z,{noWrap:!0,color:a,sx:{fontSize:{sm:15,xs:13}},children:d})}),(0,b.jsx)(u.ZP,{item:!0,xs:3,display:"flex",justifyContent:"flex-end",children:(0,b.jsx)(x.Z,{noWrap:!0,color:a,sx:{fontSize:{sm:15,xs:13}},children:m})})]})})},P=()=>{const e=(0,f.TL)(),{transfers:t,status:n}=(0,f.CG)(h.Nu),r=(0,a.s0)(),{t:c}=(0,i.$G)(),l=e=>{let{id:t}=e;r("".concat(o.Z6.transfers.path,"/view/").concat(t),{state:{id:t}})};s.useEffect((()=>{"idle"===n&&e((0,h.qE)())}),[e,n]);return(0,b.jsxs)(w.Z,{flexGrow:1,children:[(0,b.jsx)(Z.Z,{withBackButton:!0,text:c("TRANSFERS.PAGE_TITLE"),onBackButtonClick:()=>{r("".concat(o.Z6.accounts.path))}}),(0,b.jsx)(u.ZP,{container:!0,rowGap:2,children:"loading"===n?(0,b.jsx)(u.ZP,{item:!0,xs:12,children:(0,b.jsx)(g.Z,{type:"list"})}):"failed"!==n&&"succeeded"!==n||null!==t&&void 0!==t&&t.length?(0,b.jsx)(b.Fragment,{children:t.map((e=>{return(0,b.jsx)(u.ZP,{item:!0,xs:12,children:(0,b.jsx)(k,{data:(t=e,{...t,fromAccount:{...t.fromAccount,name:t.fromAccount.nameKey?c(t.fromAccount.nameKey):t.fromAccount.name}}),onClick:l})},e.id);var t}))}):(0,b.jsx)(u.ZP,{item:!0,xs:12,children:(0,b.jsx)(v.Z,{text:c("TRANSFERS.EMPTY_TEXT")})})})]})},G=()=>(0,b.jsxs)(a.Z5,{children:[(0,b.jsx)(a.AW,{path:"/",element:(0,b.jsx)(P,{})}),(0,b.jsx)(a.AW,{path:"/new",element:(0,b.jsx)(R,{mode:r.df.create})}),(0,b.jsx)(a.AW,{path:"/view/:id",element:(0,b.jsx)(R,{mode:r.df.view})}),(0,b.jsx)(a.AW,{path:"/edit/:id",element:(0,b.jsx)(R,{mode:r.df.edit})}),(0,b.jsx)(a.AW,{path:"*",element:(0,b.jsx)(a.Fg,{to:o.Z6.transfers.path,replace:!0})})]})},7195:(e,t,n)=>{n.d(t,{Z:()=>l});n(2791);var s=n(8870),a=n(3967),o=n(890),r=n(3394),c=n(184);const l=e=>{let{text:t,...n}=e;const{palette:{info:{contrastText:l}}}=(0,a.Z)(),{t:i}=(0,r.$G)(),d=t||i("COMMON.NO_DATA");return(0,c.jsx)(s.Z,{display:"flex",justifyContent:"center",...n,sx:{width:"100%",...n.sx},children:(0,c.jsx)(o.Z,{noWrap:!0,color:l,fontSize:{sm:18,xs:16},children:d})})}},645:(e,t,n)=>{n.d(t,{Z:()=>x});n(2791);var s=n(1134),a=n(8870),o=n(4925),r=n(7071),c=n(9617),l=n(1652),i=n(7792),d=n(5866),u=n(184);const x=e=>{let{name:t,label:n,rules:x={},...m}=e;const{control:f,formState:{errors:h}}=(0,s.Gc)();return(0,u.jsx)(l._,{dateAdapter:i.y,children:(0,u.jsx)(d.C,{sx:{...m.sx,paddingTop:2,overflow:"initial"},components:["DatePicker"],children:(0,u.jsx)(s.Qr,{control:f,name:t,rules:x,render:e=>{let{field:s,fieldState:{error:l}}=e;return(0,u.jsxs)(a.Z,{position:"relative",sx:{width:"100%"},children:[(0,u.jsx)(o.Z,{children:n}),(0,u.jsx)(c.M,{...s,...m}),h[t]&&(0,u.jsx)(r.Z,{sx:{position:"absolute"},error:!0,children:null===l||void 0===l?void 0:l.message})]})}})})})}},7034:(e,t,n)=>{n.d(t,{Z:()=>r});n(2791);var s=n(9658),a=n(3543),o=n(184);const r=e=>{let{open:t=!1,text:n,type:r,onClose:c,...l}=e;return(0,o.jsx)(a.Z,{open:t,autoHideDuration:5e3,onClose:()=>{c()},...l,children:(0,o.jsx)(s.Z,{severity:r,children:n})})}}}]);
//# sourceMappingURL=387.401ce957.chunk.js.map