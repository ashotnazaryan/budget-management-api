"use strict";(self.webpackChunkbudget_management=self.webpackChunkbudget_management||[]).push([[305],{3305:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var a=n(2791),s=n(7689),r=n(56),l=n(2385),o=n(1889),i=n(9276),d=n(3394),c=n(8112),u=n(7931),x=n(4372),m=n(5900),h=n(7195),p=n(5527),j=n(890),Z=n(3967),f=n(6606),y=n(6581),C=n(184);const g=e=>{let{data:t,onClick:n}=e;const{palette:{primary:{main:a,contrastText:s},error:i}}=(0,Z.Z)(),{name:d,icon:c,accountName:u,accountIcon:x,createdAt:m,amount:h,type:g}=t,v=(0,f.Z)(m).format(r.zT);return(0,C.jsx)(p.Z,{elevation:1,sx:{paddingX:2,backgroundColor:a},onClick:()=>{n&&n(t)},children:(0,C.jsxs)(o.ZP,{container:!0,columnSpacing:2,alignItems:"center",sx:{minHeight:40,cursor:"pointer"},children:[(0,C.jsx)(o.ZP,{item:!0,xs:1,display:"flex",children:c&&(0,C.jsx)(y.Z,{name:c,sx:{color:s,fontSize:{sm:22,xs:18}}})}),(0,C.jsx)(o.ZP,{item:!0,xs:3,children:(0,C.jsx)(j.Z,{noWrap:!0,color:s,children:d})}),(0,C.jsx)(o.ZP,{item:!0,xs:2,display:"flex",justifyContent:"flex-end",children:(0,C.jsx)(j.Z,{noWrap:!0,color:g===l.a9.expense?i.main:s,children:h})}),(0,C.jsx)(o.ZP,{item:!0,xs:2,display:"flex",justifyContent:"flex-end",children:(0,C.jsx)(j.Z,{noWrap:!0,color:s,children:u})}),(0,C.jsx)(o.ZP,{item:!0,xs:1,display:"flex",children:x&&(0,C.jsx)(y.Z,{name:x,color:"primary",sx:{fontSize:{sm:22,xs:18},color:s}})}),(0,C.jsx)(o.ZP,{item:!0,xs:3,display:"flex",justifyContent:"flex-end",children:(0,C.jsx)(j.Z,{noWrap:!0,color:s,children:v})})]})})},v=()=>{const e=(0,c.TL)(),{transactions:t,status:n}=(0,c.CG)(u.Bt),l=(0,s.s0)(),{t:p}=(0,d.$G)();a.useEffect((()=>{"idle"===n&&e((0,u.f1)())}),[e,n]);const j=e=>{let{id:t,name:n}=e;l("".concat(r.Z6.transactions.path,"/view/").concat(n),{state:{id:t}})};return(0,C.jsxs)(i.Z,{flexGrow:1,children:[(0,C.jsx)(m.Z,{text:p("TRANSACTIONS.PAGE_TITLE")}),(0,C.jsx)(o.ZP,{container:!0,rowGap:2,children:"loading"===n?(0,C.jsx)(o.ZP,{item:!0,xs:12,children:(0,C.jsx)(x.Z,{type:"list"})}):"failed"!==n&&"succeeded"!==n||null!==t&&void 0!==t&&t.length?(0,C.jsx)(C.Fragment,{children:t.map((e=>{return(0,C.jsx)(o.ZP,{item:!0,xs:12,children:(0,C.jsx)(g,{data:(t=e,{...t,name:t.nameKey?p(t.nameKey):t.name,accountName:t.accountNameKey?p(t.accountNameKey):t.accountName}),onClick:j})},e.id);var t}))}):(0,C.jsx)(o.ZP,{item:!0,xs:12,children:(0,C.jsx)(h.Z,{text:p("TRANSACTIONS.EMPTY_TEXT")})})})]})};var T=n(1134),A=n(8870),N=n(5022),V=n(93),E=n(7497),O=n(1634),I=n(7034),S=n(8692),P=n(645),b=n(1890),G=n(7730),w=n(9525),M=n(7559),k=n(8556);const B=e=>{let{mode:t}=e;const n=r.a,i=r.G7,p=(0,c.TL)(),y=(0,s.s0)(),{state:g}=(0,s.TH)(),{categories:v}=(0,c.CG)(u.uY),B=(0,c.CG)(u.Jp),{getStatus:R,createEditStatus:W,deleteStatus:_}=(0,c.CG)(u.Bt),D=(0,c.CG)(u.w2),{accounts:K}=(0,c.CG)(u.bk),L=(0,c.CG)(u.en),{defaultAccount:q=""}=(0,c.CG)(u.vi),Y=(0,c.CG)(u.yR),{palette:{info:{contrastText:z}}}=(0,Z.Z)(),F=(0,V.Lt)(),{t:Q}=(0,d.$G)(),[X,H]=a.useState(!1),[U,$]=a.useState(!1),[J,ee]=a.useState(!1),[te,ne]=a.useState(!1),ae="loading"===W,se="loading"===_,re=null===g||void 0===g?void 0:g.id,le=null!==Y&&void 0!==Y&&Y.nameKey?Q(Y.nameKey):(null===Y||void 0===Y?void 0:Y.name)||"",oe=(null===g||void 0===g?void 0:g.categoryType)||l.a9.expense,ie=t===l.df.create,de=t===l.df.edit,ce=t===l.df.view,ue=(0,V.pz)(t,Q,R,"TRANSACTIONS","NEW_TRANSACTION","EMPTY_TITLE",Y),xe={amount:"",categoryId:"",accountId:q||"",type:String(oe),createdAt:ie?(0,f.Z)().format():void 0,note:""},me=(0,T.cI)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:xe}),{setValue:he,handleSubmit:pe,watch:je,reset:Ze}=me,fe=je(l.Vn.type),ye=je(l.Vn.accountId),Ce=je(l.Vn.createdAt),ge=e=>{const t=Number(e);he(l.Vn.type,t,{shouldValidate:!0}),he(l.Vn.categoryId,xe.categoryId),he(l.Vn.icon,xe.icon),he(l.Vn.name,xe.name)},ve=e=>{let{id:t,name:n,nameKey:a,icon:s}=e;ce||(he(l.Vn.categoryId,t,{shouldValidate:!0}),he(l.Vn.icon,s),he(l.Vn.name,n,{shouldValidate:!0}),he("nameKey",a))},Te=e=>{he(l.Vn.accountId,e.target.value,{shouldValidate:!0})},Ae=e=>{he(l.Vn.createdAt,e.format(),{shouldValidate:!0})},Ne=e=>{const t={...e,amount:Number(e.amount),type:Number(e.type),createdAt:(0,f.Z)(e.createdAt).toDate()};p(de?(0,u.vF)([re,t]):(0,u.dT)(t)),H(!0)},Ve=a.useCallback((()=>{Y&&(he(l.Vn.categoryId,Y.categoryId),he(l.Vn.accountId,Y.accountId),he(l.Vn.icon,Y.icon),he(l.Vn.amount,(0,V.Co)(Y.amount)),he(l.Vn.type,String(Y.type)),he(l.Vn.createdAt,Y.createdAt),he(l.Vn.note,Y.note),he("name",Y.name))}),[Y,he]),Ee=a.useCallback((()=>{p((0,u.Qr)())}),[p]),Oe=a.useCallback((()=>{y("".concat(ie?r.Z6.dashboard.path:r.Z6.transactions.path)),Ee()}),[y,Ee,ie]);a.useEffect((()=>{"idle"===B&&p((0,u.CP)()),"idle"===L&&p((0,u.T8)())}),[p,B,L]),a.useEffect((()=>{"succeeded"===W&&X&&(Oe(),ee(!1),p((0,u.T8)())),"failed"===W&&X&&ee(!0)}),[p,Oe,W,X]),a.useEffect((()=>{"succeeded"===_&&U&&Oe(),"failed"===_&&U&&(ee(!0),ne(!1))}),[Oe,_,U]),a.useEffect((()=>{re||p((0,u.i1)())}),[re,p]),a.useEffect((()=>{!re||"idle"!==R||ie||U||p((0,u.fo)(re))}),[re,ie,R,p,U]),a.useEffect((()=>{he(l.Vn.accountId,q)}),[he,q]),a.useEffect((()=>{Ve()}),[Ve]),a.useEffect((()=>()=>{Ee()}),[Ee]);return(0,C.jsxs)(A.Z,{component:"form",display:"flex",flexDirection:"column",flexGrow:1,onSubmit:pe(Ne),children:[(0,C.jsx)(m.Z,{withBackButton:!0,withEditButton:ce&&!!Y,withDeleteButton:de&&!!Y,withCancelButton:!ce&&!!Y,text:ue,onBackButtonClick:Oe,onEditButtonClick:()=>{de||y("".concat(r.Z6.transactions.path,"/edit/").concat(le),{state:{id:re}})},onDeleteButtonClick:()=>{ne(!0)},onCancelButtonClick:()=>{ie?Ze(xe):Ve(),ie?y(r.Z6.dashboard.path):y("".concat(r.Z6.transactions.path,"/view/").concat(le),{state:{id:re}})}}),(0,C.jsx)(A.Z,{flexGrow:1,children:"loading"===R?(0,C.jsx)(x.Z,{type:"form"}):ie||Y&&re||"failed"!==R?(0,C.jsx)(T.RV,{...me,children:(0,C.jsxs)(o.ZP,{container:!0,rowGap:7,children:[(0,C.jsxs)(o.ZP,{item:!0,xs:12,children:[(0,C.jsx)(j.Z,{color:z,children:Q("COMMON.TYPE")}),(0,C.jsx)(G.Z,{readonly:ce,name:l.Vn.type,rules:{required:{value:!0,message:Q(F.type.required.message)}},options:(0,V.hf)(i,Q),labelColor:z,value:fe,onRadioChange:ge})]}),(0,C.jsx)(o.ZP,{item:!0,xs:12,children:(0,C.jsx)(E.Z,{InputProps:{readOnly:ce},label:Q("COMMON.AMOUNT"),type:"number",name:l.Vn.amount,rules:{required:{value:!0,message:Q(F.amount.required.message)},pattern:{value:n,message:Q(F.amount.pattern.message)}}})}),(0,C.jsx)(o.ZP,{item:!0,xs:12,children:(0,C.jsx)(b.Z,{inputProps:{readOnly:ce},label:Q("COMMON.ACCOUNT"),name:l.Vn.accountId,value:K.length?ye||q:"",onChange:Te,rules:{required:{value:!0,message:Q(F.accountId.required.message)}},renderValue:e=>(0,C.jsx)(j.Z,{children:(0,V.ut)(e,K,Q)}),children:K.map((e=>(0,C.jsx)(N.Z,{value:e.id,sx:{display:"flex",justifyContent:"space-between"},children:(0,C.jsx)(M.Z,{data:e})},e.id)))})}),(0,C.jsx)(o.ZP,{item:!0,xs:12,children:(0,C.jsx)(P.Z,{readOnly:ce,name:l.Vn.createdAt,label:Q("COMMON.DATE"),value:(0,f.Z)(Ce).isValid()?(0,f.Z)(Ce):null,maxDate:(0,f.Z)(),rules:{required:!0,validate:{maxDate:e=>Promise.resolve((0,f.Z)(e)<=(0,f.Z)()||Q(F.createdAt.max.message))}},onChange:Ae,sx:{width:"100%"}})}),(0,C.jsx)(o.ZP,{item:!0,xs:12,children:(0,C.jsx)(E.Z,{inputProps:{readOnly:ce},label:Q("COMMON.NOTE"),name:l.Vn.note})}),(0,C.jsx)(o.ZP,{item:!0,xs:12,children:(0,C.jsx)(k.Z,{name:l.Vn.categoryId,label:Q("COMMON.CATEGORY"),rules:{required:{value:!0,message:Q(F.categoryId.required.message)}},render:e=>{let{field:t}=e;return(0,C.jsx)(o.ZP,{container:!0,...t,columnGap:4,rowGap:4,children:v.filter((e=>{let{type:t}=e;return t===Number(fe)})).map((e=>{return(0,C.jsx)(o.ZP,{item:!0,children:(0,C.jsx)(S.Z,{data:(n=e,{...n,name:n.nameKey?Q(n.nameKey):n.name}),selected:t.value,readonly:ce,onItemClick:ve})},e.id);var n}))})}})})]})}):(0,C.jsx)(h.Z,{text:Q("TRANSACTIONS.EMPTY_TEXT_RENDER_CONTENT")})}),!ce&&(0,C.jsx)(o.ZP,{container:!0,display:"flex",justifyContent:"flex-end",rowGap:2,columnGap:2,sx:{marginTop:4,marginBottom:4},children:(0,C.jsx)(o.ZP,{item:!0,sm:"auto",xs:12,children:(0,C.jsx)(O.Z,{"aria-label":"Save transaction",fullWidth:!0,type:"submit",variant:"contained",loading:ae,onClick:pe(Ne),children:Q("COMMON.SAVE")})})}),(0,C.jsx)(I.Z,{type:"error",open:J,text:null!==D&&void 0!==D&&D.messageKey?Q(D.messageKey):(null===D||void 0===D?void 0:D.message)||"",onClose:()=>{ee(!1),$(!1)}}),(0,C.jsx)(w.Z,{fullWidth:!0,maxWidth:"xs",title:Q("TRANSACTIONS.DELETE_DIALOG_TITLE"),actionButtonText:Q("COMMON.YES"),open:te,loading:se,onClose:()=>{ne(!1)},onAction:()=>{p((0,u.Ks)(re)),$(!0)},children:(0,C.jsx)(j.Z,{variant:"subtitle1",children:Q("TRANSACTIONS.DELETE_DIALOG_CONFIRM")})})]})},R=()=>(0,C.jsxs)(s.Z5,{children:[(0,C.jsx)(s.AW,{path:"/",element:(0,C.jsx)(v,{})}),(0,C.jsx)(s.AW,{path:"/new",element:(0,C.jsx)(B,{mode:l.df.create})}),(0,C.jsx)(s.AW,{path:"/view/:id",element:(0,C.jsx)(B,{mode:l.df.view})}),(0,C.jsx)(s.AW,{path:"/edit/:id",element:(0,C.jsx)(B,{mode:l.df.edit})}),(0,C.jsx)(s.AW,{path:"*",element:(0,C.jsx)(s.Fg,{to:r.Z6.accounts.path,replace:!0})})]})},645:(e,t,n)=>{n.d(t,{Z:()=>x});n(2791);var a=n(1134),s=n(8870),r=n(4925),l=n(7071),o=n(9617),i=n(1652),d=n(7792),c=n(5866),u=n(184);const x=e=>{let{name:t,label:n,rules:x={},...m}=e;const{control:h,formState:{errors:p}}=(0,a.Gc)();return(0,u.jsx)(i._,{dateAdapter:d.y,children:(0,u.jsx)(c.C,{sx:{...m.sx,paddingTop:2,overflow:"initial"},components:["DatePicker"],children:(0,u.jsx)(a.Qr,{control:h,name:t,rules:x,render:e=>{let{field:a,fieldState:{error:i}}=e;return(0,u.jsxs)(s.Z,{position:"relative",sx:{width:"100%"},children:[(0,u.jsx)(r.Z,{children:n}),(0,u.jsx)(o.M,{...a,...m}),p[t]&&(0,u.jsx)(l.Z,{sx:{position:"absolute"},error:!0,children:null===i||void 0===i?void 0:i.message})]})}})})})}},1890:(e,t,n)=>{n.d(t,{Z:()=>d});n(2791);var a=n(1134),s=n(7198),r=n(7071),l=n(8870),o=n(4925),i=n(184);const d=e=>{let{name:t,label:n,rules:d={},children:c,...u}=e;const{control:x,formState:{errors:m}}=(0,a.Gc)();return(0,i.jsx)(a.Qr,{control:x,name:t,rules:d,render:e=>{let{field:a,fieldState:{error:d}}=e;return(0,i.jsxs)(l.Z,{position:"relative",children:[(0,i.jsx)(o.Z,{children:n}),(0,i.jsx)(s.Z,{fullWidth:!0,variant:"outlined",error:!!m[t],...a,...u,children:c}),m[t]&&(0,i.jsx)(r.Z,{sx:{position:"absolute"},error:!0,children:null===d||void 0===d?void 0:d.message})]})}})}}}]);
//# sourceMappingURL=305.694f644b.chunk.js.map