"use strict";(self.webpackChunkbudget_management=self.webpackChunkbudget_management||[]).push([[75],{75:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var a=n(2791),s=n(7689),l=n(56),r=n(2385),i=n(9276),o=n(1889),c=n(3400),d=n(3394),x=n(8112),u=n(7931),m=n(4631),f=n(5900),h=n(6581),p=n(7195),j=n(5527),Z=n(890),C=n(3967),y=n(9403),g=n(184);const b=e=>{let{data:t,onClick:n}=e;const{palette:{primary:{main:a,contrastText:s}}}=(0,C.Z)(),{name:l,icon:r,balance:i}=t;return(0,g.jsx)(j.Z,{elevation:1,sx:{paddingX:2,backgroundColor:a},children:(0,g.jsxs)(o.ZP,{container:!0,display:"flex",alignItems:"center",justifyContent:"space-between",flexGrow:1,columnSpacing:2,sx:{borderRadius:1,minHeight:40,cursor:"pointer"},onClick:()=>{n&&n(t)},children:[(0,g.jsx)(o.ZP,{item:!0,xs:1,display:"flex",children:r&&(0,g.jsx)(h.Z,{name:r,sx:{fontSize:24,color:s}})}),(0,g.jsx)(o.ZP,{item:!0,xs:7,display:"flex",children:(0,g.jsx)(Z.Z,{noWrap:!0,color:s,children:l})}),(0,g.jsx)(o.ZP,{item:!0,xs:4,display:"flex",justifyContent:"flex-end",children:(0,g.jsx)(y.Z,{balance:i,positiveColor:s,fontSize:{sm:16,xs:14}})})]})})};var T=n(1634),v=n(8870);const E=e=>{let{balance:t,...n}=e;const{palette:{info:{contrastText:a}}}=(0,C.Z)(),i=(0,s.s0)(),{t:o}=(0,d.$G)();return(0,g.jsxs)(v.Z,{sx:{...n.sx,display:"flex",flexDirection:"column",paddingBottom:3,borderBottom:e=>"1px solid ".concat(e.palette.secondary.main)},children:[(0,g.jsxs)(v.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:3},children:[(0,g.jsx)(Z.Z,{noWrap:!0,color:a,fontSize:18,sx:{marginRight:1},children:o("COMMON.BALANCE")}),(0,g.jsx)(y.Z,{balance:t,fontSize:18})]}),(0,g.jsxs)(v.Z,{sx:{display:"flex",flexDirection:{sm:"row",xs:"column"},alignItems:"center",justifyContent:"space-between",gap:3},children:[(0,g.jsx)(T.Z,{"aria-label":"New transfer",color:"secondary",variant:"contained",startIcon:(0,g.jsx)(h.Z,{name:r.Tu.currencyExchange}),sx:{width:{sm:"auto",xs:"100%"},fontSize:14},onClick:()=>{i("".concat(l.Z6.transfers.path,"/new"))},children:o("TRANSFERS.NEW_TRANSFER")}),(0,g.jsx)(T.Z,{"aria-label":"Transfer history",color:"secondary",startIcon:(0,g.jsx)(h.Z,{name:r.Tu.history}),sx:{width:{sm:"auto",xs:"100%"},fontSize:14},onClick:()=>{i("".concat(l.Z6.transfers.path))},children:o("TRANSFERS.TRANSFER_HISTORY")})]})]})},S=()=>{const e=(0,x.TL)(),{accounts:t,status:n}=(0,x.CG)(u.bk),{balance:j,balanceStatus:Z}=(0,x.CG)(u.Tc),C=(0,s.s0)(),{t:y}=(0,d.$G)();a.useEffect((()=>{"idle"===n&&e((0,u.T8)())}),[e,n]);const T=e=>{let{id:t,name:n}=e;C("".concat(l.Z6.accounts.path,"/view/").concat(n),{state:{id:t}})};a.useEffect((()=>{"idle"===Z&&e((0,u.sb)())}),[e,Z]);return(0,g.jsxs)(i.Z,{flexGrow:1,children:[(0,g.jsx)(E,{balance:j,sx:{marginTop:2,marginBottom:4}}),(0,g.jsx)(f.Z,{text:y("ACCOUNTS.PAGE_TITLE"),sx:{marginBottom:4}}),(0,g.jsxs)(o.ZP,{container:!0,rowGap:2,sx:{marginTop:4},children:["loading"===n?(0,g.jsx)(o.ZP,{item:!0,xs:12,children:(0,g.jsx)(m.Z,{type:"list"})}):"failed"!==n&&"succeeded"!==n||null!==t&&void 0!==t&&t.length?(0,g.jsx)(g.Fragment,{children:t.map((e=>{return(0,g.jsx)(o.ZP,{item:!0,xs:12,children:(0,g.jsx)(b,{data:(t=e,{...t,name:t.nameKey?y(t.nameKey):t.name}),onClick:T})},e.id);var t}))}):(0,g.jsx)(o.ZP,{item:!0,xs:12,children:(0,g.jsx)(p.Z,{text:y("ACCOUNTS.EMPTY_TEXT")})}),(0,g.jsx)(o.ZP,{item:!0,xs:12,display:"flex",justifyContent:"flex-end",children:(0,g.jsx)(c.Z,{color:"primary",onClick:()=>{C("".concat(l.Z6.accounts.path,"/new"))},sx:{alignSelf:"flex-end"},children:(0,g.jsx)(h.Z,{name:r.Tu.plus,sx:{fontSize:40}})})})]})]})};var N=n(1134),O=n(5022),w=n(5715),A=n(7497),k=n(7034),P=n(2581),I=n(1890),G=n(9525),M=n(8556);const B=e=>{let{mode:t}=e;const n=l.$V,i=l.Mf,c=l.SS,h=(0,s.s0)(),{state:j}=(0,s.TH)(),C=(0,x.TL)(),{getStatus:y,createEditStatus:b,deleteStatus:E}=(0,x.CG)(u.bk),S=(0,x.CG)(u.XD),B=(0,x.CG)(u.rY),{defaultCurrency:{iso:q}}=(0,x.CG)(u.vi),R=(0,w.C3)(),{t:D}=(0,d.$G)(),[_,W]=a.useState(!1),[z,L]=a.useState(!1),[K,F]=a.useState(!1),[U,V]=a.useState(!1),Y="loading"===b,$="loading"===E,H=null===j||void 0===j?void 0:j.id,X=null!==B&&void 0!==B&&B.nameKey?D(B.nameKey):(null===B||void 0===B?void 0:B.name)||"",Q=t===r.df.create,J=t===r.df.edit,ee=t===r.df.view,te=(0,w.pz)(t,D,y,"ACCOUNTS","NEW_ACCOUNT","EMPTY_TITLE",B),ne={balance:0,name:"",currencyIso:q},ae=(0,N.cI)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:ne}),{setValue:se,handleSubmit:le,watch:re,reset:ie}=ae,oe=re(r.qt.currencyIso),ce=e=>{let{id:t}=e;ee||se(r.qt.icon,t,{shouldValidate:!0})},de=e=>{const t=e.target.value;se(r.qt.currencyIso,t,{shouldValidate:!0})},xe=e=>{const t={...e,balance:Number(e.balance)};C(J?(0,u.zx)([H,t]):(0,u.o1)(t)),W(!0)},ue=a.useCallback((()=>{B&&(se(r.qt.name,B.nameKey?D(B.nameKey):B.name),se(r.qt.icon,B.icon),se(r.qt.balance,(0,w.Co)(B.balance)),se(r.qt.currencyIso,B.currencyIso))}),[B,se,D]),me=a.useCallback((()=>{C((0,u.cj)())}),[C]),fe=a.useCallback((()=>{h("".concat(l.Z6.accounts.path)),me()}),[h,me]);a.useEffect((()=>{"succeeded"===b&&_&&(fe(),F(!1)),"failed"===b&&_&&F(!0)}),[fe,b,_]),a.useEffect((()=>{"succeeded"===E&&z&&fe(),"failed"===E&&z&&(F(!0),V(!1))}),[fe,E,z]),a.useEffect((()=>{H||C((0,u.P4)())}),[H,C]),a.useEffect((()=>{H&&"idle"===y&&(J||ee)&&!z&&C((0,u.D0)(H))}),[H,J,ee,y,C,z]),a.useEffect((()=>{ue()}),[ue]),a.useEffect((()=>()=>{me()}),[me]);return(0,g.jsxs)(v.Z,{component:"form",display:"flex",flexDirection:"column",flexGrow:1,onSubmit:le(xe),children:[(0,g.jsx)(f.Z,{withBackButton:!0,withEditButton:ee&&!!B,withDeleteButton:J&&!!B,withCancelButton:!ee&&!!B,text:te,onBackButtonClick:fe,onEditButtonClick:()=>{J||h("".concat(l.Z6.accounts.path,"/edit/").concat(X),{state:{id:H}})},onDeleteButtonClick:()=>{V(!0)},onCancelButtonClick:()=>{Q?ie(ne):ue(),J?h("".concat(l.Z6.accounts.path,"/view/").concat(X),{state:{id:H}}):h(l.Z6.accounts.path)}}),(0,g.jsx)(v.Z,{flexGrow:1,children:"loading"===y?(0,g.jsx)(m.Z,{type:"form"}):Q||B&&H||"failed"!==y?(0,g.jsx)(N.RV,{...ae,children:(0,g.jsxs)(o.ZP,{container:!0,rowGap:7,children:[(0,g.jsx)(o.ZP,{item:!0,xs:12,children:(0,g.jsx)(A.Z,{InputProps:{readOnly:ee},label:D("COMMON.NAME"),name:r.qt.name,rules:{required:{value:!0,message:D(R.name.required.message)}}})}),(0,g.jsx)(o.ZP,{item:!0,xs:12,children:(0,g.jsx)(A.Z,{InputProps:{readOnly:ee},label:D("COMMON.BALANCE"),type:"number",name:r.qt.balance,rules:{required:{value:!0,message:D(R.balance.required.message)},pattern:{value:n,message:D(R.balance.pattern.message)}}})}),(0,g.jsx)(o.ZP,{item:!0,xs:12,children:(0,g.jsx)(I.Z,{inputProps:{readOnly:ee},label:D("COMMON.CURRENCY"),name:r.qt.currencyIso,value:oe,onChange:de,rules:{required:{value:!0,message:D(R.currencyIso.required.message)}},children:i.map((e=>{let{iso:t,name:n,nameKey:a,symbol:s}=e;return(0,g.jsxs)(O.Z,{value:t,children:[s," ",a?D(a):n]},t)}))})}),(0,g.jsx)(o.ZP,{item:!0,xs:12,children:(0,g.jsx)(M.Z,{name:r.qt.icon,label:D("COMMON.ICON"),rules:{required:{value:!0,message:D(R.icon.required.message)}},render:e=>{let{field:t}=e;return(0,g.jsx)(o.ZP,{container:!0,...t,columnGap:1,rowGap:3,sx:{marginTop:2},children:c.map((e=>{let{name:n}=e;return(0,g.jsx)(o.ZP,{item:!0,children:(0,g.jsx)(P.Z,{selected:t.value,id:n,icon:n,size:50,readonly:ee,onClick:ce})},n)}))})}})})]})}):(0,g.jsx)(p.Z,{text:D("ACCOUNTS.EMPTY_TEXT_RENDER_CONTENT")})}),!ee&&(0,g.jsx)(o.ZP,{container:!0,display:"flex",justifyContent:"flex-end",rowGap:2,columnGap:2,sx:{marginTop:4,marginBottom:4},children:(0,g.jsx)(o.ZP,{item:!0,sm:"auto",xs:12,children:(0,g.jsx)(T.Z,{"aria-label":"Save account",fullWidth:!0,type:"submit",variant:"contained",loading:Y,onClick:le(xe),children:D("COMMON.SAVE")})})}),(0,g.jsx)(k.Z,{type:"error",open:K,text:null!==S&&void 0!==S&&S.messageKey?D(S.messageKey):(null===S||void 0===S?void 0:S.message)||"",onClose:()=>{F(!1),L(!1)}}),(0,g.jsx)(G.Z,{fullWidth:!0,maxWidth:"xs",title:D("ACCOUNTS.DELETE_DIALOG_TITLE"),actionButtonText:D("COMMON.YES"),open:U,loading:$,onClose:()=>{V(!1)},onAction:()=>{C((0,u.tm)(H)),L(!0)},children:(0,g.jsx)(Z.Z,{variant:"subtitle1",children:D("ACCOUNTS.DELETE_DIALOG_CONFIRM")})})]})},q=()=>(0,g.jsxs)(s.Z5,{children:[(0,g.jsx)(s.AW,{path:"/",element:(0,g.jsx)(S,{})}),(0,g.jsx)(s.AW,{path:"/new",element:(0,g.jsx)(B,{mode:r.df.create})}),(0,g.jsx)(s.AW,{path:"/view/:id",element:(0,g.jsx)(B,{mode:r.df.view})}),(0,g.jsx)(s.AW,{path:"/edit/:id",element:(0,g.jsx)(B,{mode:r.df.edit})}),(0,g.jsx)(s.AW,{path:"*",element:(0,g.jsx)(s.Fg,{to:l.Z6.accounts.path,replace:!0})})]})},7195:(e,t,n)=>{n.d(t,{Z:()=>o});n(2791);var a=n(8870),s=n(3967),l=n(890),r=n(3394),i=n(184);const o=e=>{let{text:t,...n}=e;const{palette:{info:{contrastText:o}}}=(0,s.Z)(),{t:c}=(0,r.$G)(),d=t||c("COMMON.NO_DATA");return(0,i.jsx)(a.Z,{display:"flex",justifyContent:"center",...n,sx:{width:"100%",...n.sx},children:(0,i.jsx)(l.Z,{noWrap:!0,color:o,fontSize:{sm:18,xs:16},children:d})})}},8556:(e,t,n)=>{n.d(t,{Z:()=>i});n(2791);var a=n(1134),s=n(7071),l=n(4925),r=n(184);const i=e=>{let{name:t,label:n,rules:i={},render:o}=e;const{control:c,formState:{errors:d}}=(0,a.Gc)();return(0,r.jsx)(a.Qr,{control:c,name:t,rules:i,render:e=>{var a;let{field:i,fieldState:c}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{sx:{marginBottom:2},children:n}),o({field:i,fieldState:c}),d[t]&&(0,r.jsx)(s.Z,{error:!0,children:null===(a=c.error)||void 0===a?void 0:a.message})]})}})}},2581:(e,t,n)=>{n.d(t,{Z:()=>i});n(2791);var a=n(8870),s=n(3967),l=n(6581),r=n(184);const i=e=>{let{id:t,selected:n,icon:i,size:o=64,disabled:c,readonly:d,onClick:x}=e;const{palette:{primary:{main:u,contrastText:m},action:f}}=(0,s.Z)();return(0,r.jsx)(a.Z,{display:"flex",flexDirection:"column",alignItems:"center",width:o+20,children:(0,r.jsx)(a.Z,{onClick:(e=>()=>{d||x&&x({id:e})})(t),sx:{backgroundColor:c?f.disabled:n===t?u:"transparent",border:c?"none":"1px solid ".concat(u),color:n===t?m:u,height:o,width:o,borderRadius:"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:c||d?"default":"pointer"},children:(0,r.jsx)(l.Z,{name:i})})})}},7034:(e,t,n)=>{n.d(t,{Z:()=>r});n(2791);var a=n(9658),s=n(3543),l=n(184);const r=e=>{let{open:t=!1,text:n,type:r,onClose:i,...o}=e;return(0,l.jsx)(s.Z,{open:t,autoHideDuration:5e3,onClose:()=>{i()},...o,children:(0,l.jsx)(a.Z,{severity:r,children:n})})}}}]);
//# sourceMappingURL=75.abfb3b0c.chunk.js.map