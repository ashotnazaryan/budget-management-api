"use strict";(self.webpackChunkbudget_management=self.webpackChunkbudget_management||[]).push([[291],{1291:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var a=n(2791),s=n(7689),i=n(56),l=n(2385),o=n(9276),r=n(1889),c=n(3394),d=n(8112),u=n(7931),m=n(5814),x=n(4631),h=n(5900),p=n(8692),j=n(7195),f=n(184);const g=()=>{const e=i.G7,t=(0,d.TL)(),{categories:n,status:g}=(0,d.CG)(u.uY),Z=(0,s.s0)(),{t:E}=(0,c.$G)(),[C,T]=a.useState(String(l.a9.expense)),y={id:"",name:"New category",nameKey:"CATEGORIES.NEW_CATEGORY",icon:l.Tu.plus,type:Number(C)};a.useEffect((()=>{"idle"===g&&t((0,u.CP)())}),[t,g]);const v=e=>{let{id:t,name:n}=e;Z("".concat(i.Z6.categories.path,"/view/").concat(n),{state:{id:t}})},G=e=>({...e,name:e.nameKey?E(e.nameKey):e.name});return(0,f.jsxs)(o.Z,{flexGrow:1,children:[(0,f.jsx)(h.Z,{text:E("CATEGORIES.PAGE_TITLE")}),(0,f.jsx)(m.Z,{centered:!0,defaultValue:C,tabs:e,onChange:(e,t)=>{T(t)},sx:{marginBottom:3}}),(0,f.jsxs)(r.ZP,{container:!0,columnGap:4,rowGap:4,sx:{marginTop:4},children:["loading"===g?(0,f.jsx)(r.ZP,{item:!0,xs:12,children:(0,f.jsx)(x.Z,{type:"circular"})}):"failed"!==g&&"succeeded"!==g||null!==n&&void 0!==n&&n.length?(0,f.jsx)(f.Fragment,{children:n.filter((e=>{let{type:t}=e;return String(t)===C})).map((e=>(0,f.jsx)(r.ZP,{item:!0,children:(0,f.jsx)(p.Z,{data:G(e),onItemClick:v})},e.id)))}):(0,f.jsx)(r.ZP,{item:!0,xs:12,children:(0,f.jsx)(j.Z,{text:E("CATEGORIES.EMPTY_TEXT")})}),(0,f.jsx)(r.ZP,{item:!0,children:(0,f.jsx)(p.Z,{data:G(y),onItemClick:()=>{Z("".concat(i.Z6.categories.path,"/new"),{state:{categoryType:C}})}})})]})]})};var Z=n(1134),E=n(8870),C=n(890),T=n(3967),y=n(5715),v=n(1634),G=n(7497),b=n(7034),S=n(2581),O=n(7730),w=n(9525),k=n(8556);const A=e=>{let{mode:t}=e;const n=i.G7,o=i.Qr,m=(0,s.s0)(),{state:p}=(0,s.TH)(),g=(0,d.TL)(),{getStatus:A,createEditStatus:I,deleteStatus:P}=(0,d.CG)(u.uY),V=(0,d.CG)(u.Qk),M=(0,d.CG)(u.$_),{palette:{info:{contrastText:N}}}=(0,T.Z)(),q=(0,y.VU)(),{t:B}=(0,c.$G)(),[R,_]=a.useState(!1),[D,W]=a.useState(!1),[Y,K]=a.useState(!1),[L,z]=a.useState(!1),$="loading"===I,F="loading"===P,X=null===p||void 0===p?void 0:p.id,Q=null!==M&&void 0!==M&&M.nameKey?B(M.nameKey):(null===M||void 0===M?void 0:M.name)||"",H=null===p||void 0===p?void 0:p.categoryType,U=t===l.df.create,J=t===l.df.edit,ee=t===l.df.view,te=(0,y.pz)(t,B,A,"CATEGORIES","NEW_CATEGORY","EMPTY_TITLE",M),ne={type:String(H),name:""},ae=(0,Z.cI)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:ne}),{setValue:se,handleSubmit:ie,watch:le,reset:oe}=ae,re=Number(le(l.Vq.type)),ce=e=>{let{id:t}=e;ee||se(l.Vq.icon,t,{shouldValidate:!0})},de=e=>{const t=Number(e);se(l.Vq.type,t,{shouldValidate:!0})},ue=e=>{g(J?(0,u.ht)([X,e]):(0,u.k4)(e)),_(!0)},me=a.useCallback((()=>{M&&(se(l.Vq.type,String(M.type)),se(l.Vq.name,M.nameKey?B(M.nameKey):M.name),se(l.Vq.icon,M.icon))}),[M,se,B]),xe=a.useCallback((()=>{g((0,u.ZX)())}),[g]),he=a.useCallback((()=>{m("".concat(i.Z6.categories.path)),xe()}),[m,xe]);a.useEffect((()=>{"succeeded"===I&&R&&(he(),K(!1)),"failed"===I&&R&&K(!0)}),[he,I,R]),a.useEffect((()=>{"succeeded"===P&&D&&he(),"failed"===P&&D&&(K(!0),z(!1))}),[he,P,D]),a.useEffect((()=>{X||g((0,u.EV)())}),[X,g]),a.useEffect((()=>{X&&"idle"===A&&(J||ee)&&!D&&g((0,u.n3)(X))}),[X,J,ee,A,g,D]),a.useEffect((()=>{me()}),[me]),a.useEffect((()=>()=>{xe()}),[xe]);return(0,f.jsxs)(E.Z,{component:"form",display:"flex",flexDirection:"column",flexGrow:1,onSubmit:ie(ue),children:[(0,f.jsx)(h.Z,{withBackButton:!0,withEditButton:ee&&!!M,withDeleteButton:J&&!!M,withCancelButton:!ee&&!!M,text:te,onBackButtonClick:he,onEditButtonClick:()=>{J||m("".concat(i.Z6.categories.path,"/edit/").concat(Q),{state:{id:X}})},onDeleteButtonClick:()=>{z(!0)},onCancelButtonClick:()=>{U?oe(ne):me(),J?m("".concat(i.Z6.categories.path,"/view/").concat(Q),{state:{id:X}}):m(i.Z6.categories.path)}}),(0,f.jsx)(E.Z,{flexGrow:1,children:"loading"===A?(0,f.jsx)(x.Z,{type:"form"}):U||M&&X||"failed"!==A?(0,f.jsx)(Z.RV,{...ae,children:(0,f.jsxs)(r.ZP,{container:!0,rowGap:5,children:[(0,f.jsx)(r.ZP,{item:!0,xs:12,children:(0,f.jsx)(G.Z,{InputProps:{readOnly:ee},label:B("COMMON.NAME"),name:l.Vq.name,rules:{required:{value:!0,message:B(q.name.required.message)}}})}),(0,f.jsxs)(r.ZP,{item:!0,xs:12,children:[(0,f.jsx)(C.Z,{color:N,sx:{marginY:1},children:B("COMMON.TYPE")}),(0,f.jsx)(O.Z,{readonly:ee,name:l.Vq.type,rules:{required:{value:!0,message:B(q.type.required.message)}},options:(0,y.hf)(n,B),labelColor:N,value:re,onRadioChange:de})]}),(0,f.jsx)(r.ZP,{item:!0,xs:12,children:(0,f.jsx)(k.Z,{name:l.Vq.icon,label:B("COMMON.ICON"),rules:{required:{value:!0,message:B(q.icon.required.message)}},render:e=>{let{field:t}=e;return(0,f.jsx)(r.ZP,{container:!0,...t,columnGap:1,rowGap:3,sx:{marginTop:2},children:o.map((e=>{let{name:n}=e;return(0,f.jsx)(r.ZP,{item:!0,children:(0,f.jsx)(S.Z,{selected:t.value,id:n,icon:n,size:50,readonly:ee,onClick:ce})},n)}))})}})})]})}):(0,f.jsx)(j.Z,{text:B("CATEGORIES.EMPTY_TEXT_RENDER_CONTENT")})}),!ee&&(0,f.jsx)(r.ZP,{container:!0,display:"flex",justifyContent:"flex-end",rowGap:2,columnGap:2,sx:{marginTop:4,marginBottom:4},children:(0,f.jsx)(r.ZP,{item:!0,sm:"auto",xs:12,children:(0,f.jsx)(v.Z,{"aria-label":"Save category",fullWidth:!0,type:"submit",variant:"contained",loading:$,onClick:ie(ue),children:B("COMMON.SAVE")})})}),(0,f.jsx)(b.Z,{type:"error",text:null!==V&&void 0!==V&&V.messageKey?B(V.messageKey):(null===V||void 0===V?void 0:V.message)||"",open:Y,onClose:()=>{K(!1),W(!1)}}),(0,f.jsx)(w.Z,{fullWidth:!0,maxWidth:"xs",title:B("CATEGORIES.DELETE_DIALOG_TITLE"),actionButtonText:B("COMMON.YES"),open:L,loading:F,onClose:()=>{z(!1)},onAction:()=>{g((0,u.uu)(X)),W(!0)},children:(0,f.jsx)(C.Z,{variant:"subtitle1",children:B("CATEGORIES.DELETE_DIALOG_CONFIRM")})})]})},I=()=>(0,f.jsxs)(s.Z5,{children:[(0,f.jsx)(s.AW,{path:"/",element:(0,f.jsx)(g,{})}),(0,f.jsx)(s.AW,{path:"/new",element:(0,f.jsx)(A,{mode:l.df.create})}),(0,f.jsx)(s.AW,{path:"/view/:id",element:(0,f.jsx)(A,{mode:l.df.view})}),(0,f.jsx)(s.AW,{path:"/edit/:id",element:(0,f.jsx)(A,{mode:l.df.edit})}),(0,f.jsx)(s.AW,{path:"*",element:(0,f.jsx)(s.Fg,{to:i.Z6.categories.path,replace:!0})})]})},2581:(e,t,n)=>{n.d(t,{Z:()=>o});n(2791);var a=n(8870),s=n(3967),i=n(6581),l=n(184);const o=e=>{let{id:t,selected:n,icon:o,size:r=64,disabled:c,readonly:d,onClick:u}=e;const{palette:{primary:{main:m,contrastText:x},action:h}}=(0,s.Z)();return(0,l.jsx)(a.Z,{display:"flex",flexDirection:"column",alignItems:"center",width:r+20,children:(0,l.jsx)(a.Z,{onClick:(e=>()=>{d||u&&u({id:e})})(t),sx:{backgroundColor:c?h.disabled:n===t?m:"transparent",border:c?"none":"1px solid ".concat(m),color:n===t?x:m,height:r,width:r,borderRadius:"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:c||d?"default":"pointer"},children:(0,l.jsx)(i.Z,{name:o})})})}},5814:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(2791),s=n(3896),i=n(3394),l=n(225),o=n(5228);const r=(0,l.Z)(o.Z)({"&.MuiTabs-root":{}});var c=n(184);const d=e=>{let{tabs:t,defaultValue:n="0",onChange:l,...o}=e;const{t:d}=(0,i.$G)(),[u,m]=a.useState(n);return(0,c.jsx)(r,{...o,value:u,onChange:(e,t)=>{m(t),l(e,t)},children:t.map((e=>{let{value:t,label:n}=e;return(0,c.jsx)(s.Z,{value:t,label:d(n),sx:{fontSize:{sm:14,xs:12}}},t)}))})}}}]);
//# sourceMappingURL=291.5a9d4c31.chunk.js.map