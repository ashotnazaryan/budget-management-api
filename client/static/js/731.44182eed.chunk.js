(self.webpackChunkbudget_management=self.webpackChunkbudget_management||[]).push([[731],{9554:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>H});var s=t(2791),r=t(7689),n=t(56),i=t(2385),a=t(9276),o=t(1889),d=t(3400),c=t(3394),x=t(8112),u=t(7931),h=t(5900),m=t(6581),j=t(4372),C=t(7195),v=t(5527),y=t(890),f=t(3967),p=t(184);const g=e=>{var l;let{data:t,defaultCurrency:s,onClick:r}=e;const{palette:{primary:{main:a,contrastText:d}}}=(0,f.Z)(),{t:x}=(0,c.$G)(),{name:u,salary:h,amount:j,currencyIso:C,month:g}=t,E=(null===(l=n.gg.find((e=>{let{index:l}=e;return l===Number(g)})))||void 0===l?void 0:l.nameKey)||"";return(0,p.jsx)(v.Z,{elevation:1,sx:{paddingX:2,backgroundColor:a},children:(0,p.jsxs)(o.ZP,{container:!0,display:"flex",alignItems:"center",justifyContent:"space-between",flexGrow:1,columnSpacing:2,sx:{borderRadius:1,minHeight:40,cursor:"pointer"},onClick:()=>{r&&r(t)},children:[(0,p.jsx)(o.ZP,{item:!0,xs:1,display:"flex",children:(0,p.jsx)(m.Z,{name:i.Tu.receipt,sx:{fontSize:{sm:22,xs:18},color:d}})}),(0,p.jsx)(o.ZP,{item:!0,xs:4,display:"flex",justifyContent:"flex-start",children:(0,p.jsx)(y.Z,{noWrap:!0,color:d,sx:{fontSize:{sm:15,xs:13}},children:u})}),(0,p.jsx)(o.ZP,{item:!0,xs:2,display:"flex",justifyContent:"flex-start",children:(0,p.jsx)(y.Z,{noWrap:!0,color:d,sx:{fontSize:{sm:15,xs:13}},children:x(E)})}),(0,p.jsx)(o.ZP,{item:!0,xs:3,display:"flex",children:(0,p.jsx)(y.Z,{noWrap:!0,color:d,sx:{fontSize:{sm:15,xs:13}},children:null===j||void 0===j?void 0:j.gross})}),(0,p.jsx)(o.ZP,{item:!0,xs:2,display:"flex",justifyContent:"flex-end",children:(0,p.jsxs)(y.Z,{noWrap:!0,color:d,sx:{fontSize:{sm:15,xs:13}},children:[h," ",C]})})]})})},E=()=>{const{t:e}=(0,c.$G)(),l=(0,r.s0)(),t=(0,x.TL)(),{invoices:v,status:y}=(0,x.CG)(u.xF),f=(0,x.CG)(u.j),E=e=>{let{id:t,name:s}=e;l("".concat(n.Z6.invoices.path,"/view/").concat(s),{state:{id:t}})};s.useEffect((()=>{"idle"===y&&t((0,u.sA)())}),[t,y]);return(0,p.jsxs)(a.Z,{flexGrow:1,children:[(0,p.jsx)(h.Z,{text:e("INVOICES.PAGE_TITLE")}),(0,p.jsxs)(o.ZP,{container:!0,rowGap:2,sx:{marginTop:4},children:["loading"===y?(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(j.Z,{type:"list"})}):"failed"!==y&&"succeeded"!==y||null!==v&&void 0!==v&&v.length?(0,p.jsx)(p.Fragment,{children:v.map((e=>(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(g,{data:e,defaultCurrency:f,onClick:E})},e.id)))}):(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(C.Z,{text:e("INVOICES.EMPTY_TEXT")})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,display:"flex",justifyContent:"flex-end",children:(0,p.jsx)(d.Z,{"aria-label":"Add invoice",color:"primary",onClick:()=>{l("".concat(n.Z6.invoices.path,"/new"))},sx:{alignSelf:"flex-end"},children:(0,p.jsx)(m.Z,{name:i.Tu.plus,sx:{fontSize:40}})})})]})]})};var Z=t(8870),O=t(3013),b=t(7034),I=t(9525),N=t(173);const T=e=>{let{...l}=e;return(0,p.jsx)(Z.Z,{children:l.children(N)})};var S=t(1134),A=t(5022),M=t(6606),P=t(7497),D=t(1890),V=t(9078),G=t(1634),w=t(9955),B=t(7071),W=t(5523);const L=e=>{let{name:l,label:t,rules:s={},onSwitchChange:r,...n}=e;const{control:i,formState:{errors:a}}=(0,S.Gc)();return(0,p.jsx)(S.Qr,{control:i,name:l,rules:s,render:e=>{let{field:s,fieldState:{error:i}}=e;return(0,p.jsxs)(Z.Z,{position:"relative",children:[(0,p.jsx)(W.Z,{control:(0,p.jsx)(w.Z,{...n,...s,value:s.value,checked:s.value,onChange:e=>{s.onChange(e),(e=>{r&&r(e.target.checked)})(e)}}),label:(0,p.jsx)(y.Z,{children:t}),labelPlacement:"start",sx:{"&.MuiFormControlLabel-root":{margin:0}}}),a[l]&&(0,p.jsx)(B.Z,{sx:{position:"absolute"},error:!0,children:null===i||void 0===i?void 0:i.message})]})}})};var R=t(645);const U=e=>{let{data:l,loading:t,mode:r,onPreview:a,onSubmit:d,passResetFormFunc:h}=e;const{t:m}=(0,c.$G)(),j=(0,O.w8)(),{defaultCurrency:{iso:C}}=(0,x.CG)(u.vi),f=n.a,g=n.Mf.filter((e=>e.iso!==C)),E=n.gg,Z=E.find((e=>e.index===(0,O.UF)())),[b,I]=s.useState(!1),N=r===i.df.view,T=r===i.df.create,w={name:"".concat(m("INVOICES.INVOICE"),"_").concat(m((null===Z||void 0===Z?void 0:Z.nameKey)||"")||(null===Z||void 0===Z?void 0:Z.name)),salary:"",currencyIso:T?"USD":l.currencyIso||"",month:T?null===Z||void 0===Z?void 0:Z.index:l.month||(null===Z||void 0===Z?void 0:Z.index),createdAt:T?(0,M.Z)().format():l.createdAt,vatIncluded:!1,sellerName:"",sellerAddress:"",sellerLocation:"",sellerVatID:"",sellerAccount:"",buyerName:"",buyerAddress:"",buyerLocation:"",buyerVatID:""},B=(0,S.cI)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:w}),{setValue:W,handleSubmit:U,watch:_,reset:q}=B,k=_(i.W4.createdAt);s.useEffect((()=>{l&&Object.keys(l).forEach((e=>{W(e,l[e])})),I(!!l.vatIncluded)}),[l,W]);const z=e=>{d(e)};return h((()=>{q(T?w:l)})),(0,p.jsx)(S.RV,{...B,children:(0,p.jsx)("form",{onSubmit:U(z),children:(0,p.jsxs)(o.ZP,{container:!0,gap:3,children:[(0,p.jsx)(o.ZP,{item:!0,container:!0,children:(0,p.jsxs)(v.Z,{elevation:1,sx:{paddingX:3,paddingTop:2,paddingBottom:6,width:"100%"},children:[(0,p.jsx)(y.Z,{sx:{marginTop:2,marginBottom:4},fontSize:17,children:m("INVOICES.MAIN_INFO")}),(0,p.jsxs)(o.ZP,{item:!0,container:!0,gap:7,children:[(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(P.Z,{inputProps:{readOnly:N},label:m("COMMON.NAME"),name:i.W4.name,rules:{required:{value:!0,message:m(j.name.required.message)}}})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(P.Z,{inputProps:{readOnly:N},label:m("COMMON.SALARY"),type:"number",name:i.W4.salary,rules:{required:{value:!0,message:m(j.salary.required.message)},pattern:{value:f,message:m(j.salary.pattern.message)}}})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(D.Z,{inputProps:{readOnly:N},label:m("COMMON.CURRENCY"),name:i.W4.currencyIso,rules:{required:{value:!0,message:m(j.currencyIso.required.message)}},children:g.map((e=>{let{iso:l,name:t,nameKey:s,symbol:r}=e;return(0,p.jsx)(A.Z,{value:l,children:(0,p.jsx)(V.Z,{currency:{iso:l,symbol:r,name:t,nameKey:s}})},l)}))})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(D.Z,{inputProps:{readOnly:N},label:m("COMMON.MONTH"),name:i.W4.month,rules:{required:{value:!0,message:m(j.month.required.message)}},children:E.map((e=>(0,p.jsx)(A.Z,{value:e.index,children:m(e.nameKey)||e.name},e.index)))})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(R.Z,{disableFuture:!0,readOnly:N,name:i.W4.createdAt,label:m("COMMON.DATE"),value:(0,M.Z)(k).isValid()?(0,M.Z)(k):null,rules:{required:{value:!0,message:m(j.createdAt.required.message)},validate:{maxDate:e=>Promise.resolve((0,M.Z)(e)<=(0,M.Z)()||m(j.createdAt.max.message))}},onChange:e=>{W(i.W4.createdAt,e.format(),{shouldValidate:!0})},sx:{width:"100%"}})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(L,{name:i.W4.vatIncluded,label:m("INVOICES.INCLUDE_VAT"),checked:b,disabled:N,onSwitchChange:e=>{I(e),W(i.W4.vatIncluded,e)}})})]})]})}),(0,p.jsx)(o.ZP,{item:!0,container:!0,children:(0,p.jsxs)(v.Z,{elevation:1,sx:{paddingX:3,paddingTop:2,paddingBottom:7,width:"100%"},children:[(0,p.jsx)(y.Z,{sx:{marginTop:2,marginBottom:4},fontSize:17,children:m("INVOICES.SELLER_INFO")}),(0,p.jsxs)(o.ZP,{item:!0,container:!0,gap:7,children:[(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(P.Z,{inputProps:{readOnly:N},label:m("COMMON.NAME"),name:i.W4.sellerName,rules:{required:{value:!0,message:m(j.sellerName.required.message)}}})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(P.Z,{inputProps:{readOnly:N},label:m("COMMON.ADDRESS"),name:i.W4.sellerAddress,rules:{required:{value:!0,message:m(j.sellerAddress.required.message)}}})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(P.Z,{inputProps:{readOnly:N},label:m("COMMON.LOCATION"),name:i.W4.sellerLocation,rules:{required:{value:!0,message:m(j.sellerLocation.required.message)}}})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(P.Z,{inputProps:{readOnly:N},label:m("COMMON.VAT_ID"),name:i.W4.sellerVatID,rules:{required:{value:!0,message:m(j.sellerVatID.required.message)}}})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(P.Z,{inputProps:{readOnly:N},label:m("COMMON.ACCOUNT"),name:i.W4.sellerAccount,rules:{required:{value:!0,message:m(j.sellerAccount.required.message)}}})})]})]})}),(0,p.jsx)(o.ZP,{item:!0,container:!0,children:(0,p.jsxs)(v.Z,{elevation:1,sx:{paddingX:3,paddingTop:2,paddingBottom:7,width:"100%"},children:[(0,p.jsx)(y.Z,{sx:{marginTop:2,marginBottom:4},fontSize:17,children:m("INVOICES.BUYER_INFO")}),(0,p.jsxs)(o.ZP,{item:!0,container:!0,gap:7,children:[(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(P.Z,{inputProps:{readOnly:N},label:m("COMMON.NAME"),name:i.W4.buyerName,rules:{required:{value:!0,message:m(j.buyerName.required.message)}}})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(P.Z,{inputProps:{readOnly:N},label:m("COMMON.ADDRESS"),name:i.W4.buyerAddress,rules:{required:{value:!0,message:m(j.buyerAddress.required.message)}}})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(P.Z,{inputProps:{readOnly:N},label:m("COMMON.LOCATION"),name:i.W4.buyerLocation,rules:{required:{value:!0,message:m(j.buyerLocation.required.message)}}})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(P.Z,{inputProps:{readOnly:N},label:m("COMMON.VAT_ID"),name:i.W4.buyerVatID,rules:{required:{value:!0,message:m(j.buyerVatID.required.message)}}})})]})]})}),!N&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(G.Z,{"aria-label":"Preview invoice",fullWidth:!0,type:"submit",variant:"contained",onClick:U((e=>{a(e)})),children:m("COMMON.PREVIEW")})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,children:(0,p.jsx)(G.Z,{"aria-label":"Save invoice",fullWidth:!0,variant:"contained",loading:t,onClick:U(z),children:m("COMMON.SAVE")})})]})]})})})};var _,q=t(8126),k=t(3809),z=t(168);const F=(0,t(225).Z)(q.Z$)(_||(_=(0,z.Z)(["\n  min-height: calc(100vh - 30px);\n  width: 100%;\n"])));q.Zx.register({family:"SourceSansPro",fonts:[{src:"https://fonts.gstatic.com/s/sourcesanspro/v14/6xK3dSBYKcSV-LCoeQqfX1RYOo3aPw.ttf",fontWeight:400},{src:"https://fonts.gstatic.com/s/sourcesanspro/v14/6xKydSBYKcSV-LCoeQqfX1RYOo3i54rAkA.ttf",fontWeight:700}]});const Y=q.mM.create({page:{backgroundColor:"#E4E4E4",fontFamily:"SourceSansPro",padding:20,borderWidth:0},name:{fontSize:15,fontWeight:"bold",textAlign:"center"},heading:{display:"flex",flexDirection:"row",alignItems:"center"},label:{fontSize:12,fontWeight:"bold",marginRight:10},value:{fontSize:12},account:{fontSize:12,marginTop:30},sellerBuyer:{display:"flex",flexDirection:"row",alignItems:"flex-start",marginTop:40},seller:{flex:50},buyer:{flex:50},table:{display:"flex",flexDirection:"column",marginTop:40,border:"1px solid #000"},headerRow:{display:"flex",flexDirection:"row",alignItems:"flex-end",backgroundColor:"#959ba1"},bodyRow:{display:"flex",flexDirection:"row",alignItems:"center"},tableCol:{borderRight:"1px solid #000",height:"100%",justifyContent:"center"},noCol:{width:"5%"},nameCol:{width:"22%"},unitCol:{width:"5%"},quantityCol:{width:"5%"},unitNetPriceCol:{width:"12%"},netValueCol:{width:"12%"},vatRateCol:{width:"6%"},vatAmountCol:{width:"12%"},grossValueCol:{width:"12%"},currencyCol:{width:"9%"},tableCell:{fontSize:11,margin:4},total:{marginTop:20,fontSize:13,fontWeight:"bold",textAlign:"right"},vatExemption:{marginTop:20,fontSize:11},noBorder:{border:"none"}}),K=(e,l)=>(0,p.jsx)(q.xv,{style:Y.tableCell,hyphenationCallback:e=>((e,l)=>{const t=Math.ceil(e.length/l),s=new Array(t);for(let r=0,n=0;r<t;++r,n+=l)s[r]=e.substring(n,n+l);return s})(e,l),children:e}),$=e=>{let{data:l,defaultCurrency:t,saleDate:s}=e;const{t:r}=(0,c.$G)(),n=l.amount?(0,O.tb)(l.amount):{};return(0,p.jsx)(q.BB,{children:(0,p.jsxs)(q.T3,{size:"A4",style:Y.page,children:[(0,p.jsx)(q.G7,{children:(0,p.jsx)(q.xv,{style:Y.name,children:l.name})}),(0,p.jsxs)(q.G7,{style:Y.heading,children:[(0,p.jsxs)(q.xv,{style:Y.label,children:[r("INVOICES.DOCUMENT.INVOICE_NO"),"."]}),(0,p.jsx)(q.xv,{style:Y.value,children:(0,O.D9)()})]}),(0,p.jsxs)(q.G7,{style:Y.heading,children:[(0,p.jsxs)(q.xv,{style:Y.label,children:[r("INVOICES.DOCUMENT.ISSUE_DATE"),":"]}),(0,p.jsx)(q.xv,{style:Y.value,children:(0,O._3)(l.createdAt)})]}),(0,p.jsxs)(q.G7,{style:Y.heading,children:[(0,p.jsxs)(q.xv,{style:Y.label,children:[r("INVOICES.DOCUMENT.SALE_DATE"),":"]}),(0,p.jsx)(q.xv,{style:Y.value,children:s})]}),(0,p.jsxs)(q.G7,{style:Y.heading,children:[(0,p.jsxs)(q.xv,{style:Y.label,children:[r("INVOICES.DOCUMENT.DUE_DATE"),":"]}),(0,p.jsx)(q.xv,{style:Y.value,children:(0,O.FW)(14)})]}),(0,p.jsxs)(q.G7,{style:Y.heading,children:[(0,p.jsxs)(q.xv,{style:Y.label,children:[r("INVOICES.DOCUMENT.PAYMENT_TYPE"),":"]}),(0,p.jsx)(q.xv,{style:Y.value,children:r("INVOICES.DOCUMENT.TRANSFER")})]}),(0,p.jsxs)(q.G7,{style:Y.sellerBuyer,children:[(0,p.jsxs)(q.G7,{style:Y.seller,children:[(0,p.jsxs)(q.xv,{style:Y.label,children:[r("INVOICES.DOCUMENT.SELLER"),":"]}),(0,p.jsxs)(q.G7,{children:[(0,p.jsx)(q.xv,{style:Y.value,children:l.sellerName}),(0,p.jsx)(q.xv,{style:Y.value,children:l.sellerAddress}),(0,p.jsx)(q.xv,{style:Y.value,children:l.sellerLocation}),(0,p.jsxs)(q.xv,{style:Y.value,children:[r("COMMON.VAT_ID")," ",l.sellerVatID]}),(0,p.jsx)(q.xv,{style:Y.account,children:l.sellerAccount})]})]}),(0,p.jsxs)(q.G7,{style:Y.buyer,children:[(0,p.jsxs)(q.xv,{style:Y.label,children:[r("INVOICES.DOCUMENT.BUYER"),":"]}),(0,p.jsxs)(q.G7,{children:[(0,p.jsx)(q.xv,{style:Y.value,children:l.buyerName}),(0,p.jsx)(q.xv,{style:Y.value,children:l.buyerAddress}),(0,p.jsx)(q.xv,{style:Y.value,children:l.buyerLocation}),(0,p.jsx)(q.xv,{style:Y.value,children:l.buyerVatID})]})]})]}),(0,p.jsxs)(q.G7,{style:Y.table,children:[(0,p.jsxs)(q.G7,{style:Y.headerRow,children:[(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.noCol},children:(0,p.jsx)(q.xv,{style:Y.tableCell,children:r("INVOICES.DOCUMENT.TABLE.NO")})}),(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.nameCol},children:(0,p.jsx)(q.xv,{style:Y.tableCell,children:r("INVOICES.DOCUMENT.TABLE.NAME")})}),(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.unitCol},children:K(r("INVOICES.DOCUMENT.TABLE.UNIT"),3)}),(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.quantityCol},children:K(r("INVOICES.DOCUMENT.TABLE.QUANTITY"),3)}),(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.unitNetPriceCol},children:(0,p.jsx)(q.xv,{style:Y.tableCell,children:r("INVOICES.DOCUMENT.TABLE.UNIT_NET_PRICE")})}),(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.netValueCol},children:(0,p.jsx)(q.xv,{style:Y.tableCell,children:r("INVOICES.DOCUMENT.TABLE.NET_VALUE")})}),(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.vatRateCol},children:K(r("INVOICES.DOCUMENT.TABLE.VAT_RATE"),3)}),(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.vatAmountCol},children:(0,p.jsx)(q.xv,{style:Y.tableCell,children:r("INVOICES.DOCUMENT.TABLE.VAT_AMOUNT")})}),(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.grossValueCol},children:(0,p.jsx)(q.xv,{style:Y.tableCell,children:r("INVOICES.DOCUMENT.TABLE.GROSS_VALUE")})}),(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.noBorder,...Y.currencyCol},children:(0,p.jsx)(q.xv,{style:Y.tableCell,children:r("INVOICES.DOCUMENT.TABLE.CURRENCY")})})]}),(0,p.jsxs)(q.G7,{style:Y.bodyRow,children:[(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.noCol},children:(0,p.jsx)(q.xv,{style:Y.tableCell,children:"1"})}),(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.nameCol},children:K("".concat(r("INVOICES.DOCUMENT.TABLE.PROGRAMMING_SERVICES")," ").concat((0,O.VY)()),20)}),(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.unitCol},children:(0,p.jsx)(q.xv,{style:Y.tableCell,children:"\u2014"})}),(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.quantityCol},children:(0,p.jsx)(q.xv,{style:Y.tableCell,children:"1"})}),(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.unitNetPriceCol},children:(0,p.jsx)(q.xv,{style:Y.tableCell,children:null===n||void 0===n?void 0:n.net})}),(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.netValueCol},children:(0,p.jsx)(q.xv,{style:Y.tableCell,children:null===n||void 0===n?void 0:n.net})}),(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.vatRateCol},children:(0,p.jsx)(q.xv,{style:Y.tableCell,children:l.vatIncluded?"".concat(null===n||void 0===n?void 0:n.vatRate,"%"):"\u2014"})}),(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.vatAmountCol},children:(0,p.jsx)(q.xv,{style:Y.tableCell,children:l.vatIncluded?null===n||void 0===n?void 0:n.vatAmount:"\u2014"})}),(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.grossValueCol},children:(0,p.jsx)(q.xv,{style:Y.tableCell,children:null===n||void 0===n?void 0:n.gross})}),(0,p.jsx)(q.G7,{style:{...Y.tableCol,...Y.noBorder,...Y.currencyCol},children:(0,p.jsx)(q.xv,{style:Y.tableCell,children:t.iso})})]})]}),(0,p.jsx)(q.G7,{style:Y.total,children:(0,p.jsxs)(q.xv,{children:[r("INVOICES.DOCUMENT.TABLE.TOTAL"),": ",null===n||void 0===n?void 0:n.gross," ",t.iso]})}),!l.vatIncluded&&(0,p.jsx)(q.G7,{style:Y.vatExemption,children:(0,p.jsx)(q.xv,{children:r("INVOICES.DOCUMENT.TABLE.VAT_EXEMPTION")})})]})})},Q=e=>{let{isAndroid:l,invoiceData:t,date:s,defaultCurrency:r}=e;const{t:n}=(0,c.$G)(),{palette:{info:{contrastText:i}}}=(0,f.Z)();return l?(0,p.jsx)(q.WD,{document:(0,p.jsx)($,{data:t,saleDate:s,defaultCurrency:r}),fileName:t.name,children:e=>{let{loading:l}=e;return l?(0,p.jsx)(k.Z,{}):(0,p.jsxs)(Z.Z,{sx:{marginY:2},children:[(0,p.jsx)(y.Z,{variant:"subtitle1",color:i,children:n("INVOICES.DOCUMENT.UNSUPPORTED_DEVICE")}),(0,p.jsx)(G.Z,{"aria-label":"Download",fullWidth:!0,color:"secondary",variant:"contained",sx:{marginTop:2},children:n("COMMON.DOWNLOAD")})]})}}):(0,p.jsx)(F,{style:{width:"100%",height:"100vh"},children:(0,p.jsx)($,{data:t,saleDate:s,defaultCurrency:r})})},X=e=>{let{mode:l}=e;const{t:t}=(0,c.$G)(),a=(0,r.s0)(),{getStatus:d,createEditStatus:m,deleteStatus:v}=(0,x.CG)(u.xF),{rates:f,date:g}=(0,x.CG)(u.Of),E=(0,x.CG)(u.vf),N=(0,x.CG)(u.Jl),S=(0,x.CG)(u.Qy),{status:A,userProfile:M}=(0,x.CG)(u.tM),P=(0,x.CG)(u.dy),{defaultCurrency:D}=(0,x.CG)(u.vi),V=(0,x.TL)(),{state:G}=(0,r.TH)(),w=null===G||void 0===G?void 0:G.id,B="loading"===m,W="loading"===v,L=l===i.df.edit,R=l===i.df.view,_=l===i.df.create,[q,k]=s.useState({}),[z,F]=s.useState(!1),[Y,K]=s.useState(!1),[$,X]=s.useState(!1),[H,J]=s.useState(!1),ee=(0,O.pz)(l,t,d,"INVOICES","NEW_INVOICE","EMPTY_TITLE",N);let le=()=>null;const te=e=>{const l=ne(e);V((0,u.xT)(l)),k({...e,amount:l})},se=e=>{const l=ne(e),t=(0,O.ec)({...e,amount:l}),s=(0,O.JY)(l);V((0,u.xT)(l)),k({...e,amount:l}),F(!0),V(L?(0,u.$v)([w,{...t,amount:s}]):(0,u.Z$)({...t,amount:s}))},re=e=>{le=e},ne=e=>{var l;const{salary:t,vatIncluded:s,currencyIso:r}=e,n=null===(l=f.find((e=>e.code===r)))||void 0===l?void 0:l.value;return(0,O.fu)(D.iso,n,Number(t),s)},ie=s.useCallback((()=>{V((0,u.p3)()),V((0,u.IW)())}),[V]),ae=s.useCallback((()=>{a("".concat(n.Z6.invoices.path)),ie(),k({})}),[a,ie]);s.useEffect((()=>{"succeeded"===m&&z&&(J(!1),V((0,u.QJ)()),ae()),"failed"===m&&z&&J(!0)}),[V,ae,m,z]),s.useEffect((()=>{k((e=>({...e,amount:E})))}),[E]),s.useEffect((()=>{if("idle"===A&&V((0,u.Ai)()),"succeeded"===A){const e=(0,O.Aj)(P,M);k((l=>({...l,...e})))}}),[V,A,P,M]),s.useEffect((()=>{"succeeded"===v&&Y&&ae(),"failed"===v&&Y&&(J(!0),X(!1))}),[ae,v,Y]),s.useEffect((()=>{w||V((0,u.iS)())}),[w,V]),s.useEffect((()=>{!w||"idle"!==d||_||Y||V((0,u.d5)(w))}),[w,_,d,V,Y]),s.useEffect((()=>{N&&"succeeded"===d&&(L||R)&&k(N)}),[N,L,R,d,V]);return(0,p.jsxs)(Z.Z,{flexGrow:1,children:[(0,p.jsx)(h.Z,{withBackButton:!0,withEditButton:R&&!!N,withDeleteButton:L&&!!N,withCancelButton:!R&&!!N,text:ee,onBackButtonClick:ae,onEditButtonClick:()=>{L||a("".concat(n.Z6.invoices.path,"/edit/").concat(null===N||void 0===N?void 0:N.name),{state:{id:w}})},onDeleteButtonClick:()=>{X(!0)},onCancelButtonClick:()=>{k(_?{}:q),le(),_?a(n.Z6.invoices.path):a("".concat(n.Z6.invoices.path,"/view/").concat(null===N||void 0===N?void 0:N.name),{state:{id:w}})}}),"loading"===d?(0,p.jsx)(j.Z,{type:"form"}):_||N&&w||"failed"!==d?(0,p.jsxs)(o.ZP,{container:!0,columnSpacing:3,rowSpacing:5,children:[(0,p.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,p.jsx)(U,{data:q,loading:B,mode:l,onPreview:te,onSubmit:se,passResetFormFunc:re})}),(0,p.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,p.jsx)(T,{children:e=>{let{isAndroid:l}=e;return(0,p.jsx)(Q,{isAndroid:l,invoiceData:q,date:g,defaultCurrency:D})}})})]}):(0,p.jsx)(C.Z,{text:t("INVOICES.EMPTY_TEXT_RENDER_CONTENT")}),(0,p.jsx)(b.Z,{type:"error",open:H,text:null!==S&&void 0!==S&&S.messageKey?t(S.messageKey):(null===S||void 0===S?void 0:S.message)||"",onClose:()=>{J(!1),K(!1)}}),(0,p.jsx)(I.Z,{fullWidth:!0,maxWidth:"xs",title:t("INVOICES.DELETE_DIALOG_TITLE"),actionButtonText:t("COMMON.YES"),open:$,loading:W,onClose:()=>{X(!1)},onAction:()=>{V((0,u.Wu)(w)),K(!0)},children:(0,p.jsx)(y.Z,{variant:"subtitle1",children:t("INVOICES.DELETE_DIALOG_CONFIRM")})})]})},H=()=>(0,p.jsxs)(r.Z5,{children:[(0,p.jsx)(r.AW,{path:"/",element:(0,p.jsx)(E,{})}),(0,p.jsx)(r.AW,{path:"/new",element:(0,p.jsx)(X,{mode:i.df.create})}),(0,p.jsx)(r.AW,{path:"/view/:id",element:(0,p.jsx)(X,{mode:i.df.view})}),(0,p.jsx)(r.AW,{path:"/edit/:id",element:(0,p.jsx)(X,{mode:i.df.edit})}),(0,p.jsx)(r.AW,{path:"*",element:(0,p.jsx)(r.Fg,{to:n.Z6.invoices.path,replace:!0})})]})},7195:(e,l,t)=>{"use strict";t.d(l,{Z:()=>o});t(2791);var s=t(8870),r=t(3967),n=t(890),i=t(3394),a=t(184);const o=e=>{let{text:l,...t}=e;const{palette:{info:{contrastText:o}}}=(0,r.Z)(),{t:d}=(0,i.$G)(),c=l||d("COMMON.NO_DATA");return(0,a.jsx)(s.Z,{display:"flex",justifyContent:"center",...t,sx:{width:"100%",...t.sx},children:(0,a.jsx)(n.Z,{noWrap:!0,color:o,fontSize:{sm:18,xs:16},children:c})})}},645:(e,l,t)=>{"use strict";t.d(l,{Z:()=>u});t(2791);var s=t(1134),r=t(8870),n=t(4925),i=t(7071),a=t(9617),o=t(1652),d=t(7792),c=t(5866),x=t(184);const u=e=>{let{name:l,label:t,rules:u={},...h}=e;const{control:m,formState:{errors:j}}=(0,s.Gc)();return(0,x.jsx)(o._,{dateAdapter:d.y,children:(0,x.jsx)(c.C,{sx:{...h.sx,paddingTop:2,overflow:"initial"},components:["DatePicker"],children:(0,x.jsx)(s.Qr,{control:m,name:l,rules:u,render:e=>{let{field:s,fieldState:{error:o}}=e;return(0,x.jsxs)(r.Z,{position:"relative",sx:{width:"100%"},children:[(0,x.jsx)(n.Z,{children:t}),(0,x.jsx)(a.M,{...s,...h}),j[l]&&(0,x.jsx)(i.Z,{sx:{position:"absolute"},error:!0,children:null===o||void 0===o?void 0:o.message})]})}})})})}},7497:(e,l,t)=>{"use strict";t.d(l,{Z:()=>h});t(2791);var s,r=t(1134),n=t(7071),i=t(8870),a=t(3967),o=t(168),d=t(225),c=t(3006);const x=(0,d.Z)(c.Z)(s||(s=(0,o.Z)(["\n  &.MuiInputBase-input {\n    border-color: ",";\n    color: ",";\n  },\n  &.MuiOutlinedInput-root {\n    &.Mui-error {\n      & .MuiOutlinedInput-notchedOutline: {\n        border-color: ",",\n      }\n    }\n    border-color: ",";\n    color: ",";\n  }\n"])),(e=>e.theme.palette.primary.main),(e=>e.theme.palette.primary.main),(e=>e.theme.palette.error.main),(e=>e.theme.palette.primary.main),(e=>e.theme.palette.error.main));var u=t(184);const h=e=>{let{name:l,rules:t={},...s}=e;const o=(0,a.Z)(),{control:d,formState:{errors:c}}=(0,r.Gc)();return(0,u.jsx)(r.Qr,{control:d,name:l,rules:t,render:e=>{let{field:t,fieldState:{error:r}}=e;return(0,u.jsxs)(i.Z,{position:"relative",children:[(0,u.jsx)(x,{fullWidth:!0,...t,...s,theme:o,error:!!c[l]}),c[l]&&(0,u.jsx)(n.Z,{sx:{position:"absolute"},error:!0,children:null===r||void 0===r?void 0:r.message})]})}})}},1890:(e,l,t)=>{"use strict";t.d(l,{Z:()=>d});t(2791);var s=t(1134),r=t(7198),n=t(7071),i=t(8870),a=t(4925),o=t(184);const d=e=>{let{name:l,label:t,rules:d={},children:c,...x}=e;const{control:u,formState:{errors:h}}=(0,s.Gc)();return(0,o.jsx)(s.Qr,{control:u,name:l,rules:d,render:e=>{let{field:s,fieldState:{error:d}}=e;return(0,o.jsxs)(i.Z,{position:"relative",children:[(0,o.jsx)(a.Z,{children:t}),(0,o.jsx)(r.Z,{fullWidth:!0,variant:"outlined",error:!!h[l],...s,...x,children:c}),h[l]&&(0,o.jsx)(n.Z,{sx:{position:"absolute"},error:!0,children:null===d||void 0===d?void 0:d.message})]})}})}},4372:(e,l,t)=>{"use strict";t.d(l,{Z:()=>i});t(2791);var s=t(7047),r=t(1889),n=t(184);const i=e=>{let{type:l,...t}=e;const i="form"===l,a=()=>{switch(l){case"list":default:return{firstBar:40,secondBar:40,thirdBar:40};case"form":return{firstBar:56,secondBar:56,thirdBar:56};case"summary":return{firstBar:30,secondBar:60,thirdBar:120};case"circular":return{firstBar:64,secondBar:64,thirdBar:64}}};return"circular"===l?(0,n.jsxs)(r.ZP,{container:!0,columnGap:4,rowGap:4,children:[(0,n.jsx)(r.ZP,{item:!0,width:100,display:"flex",justifyContent:"center",children:(0,n.jsx)(s.Z,{...t,variant:"circular",height:a().firstBar,width:a().firstBar})}),(0,n.jsx)(r.ZP,{item:!0,width:100,display:"flex",justifyContent:"center",children:(0,n.jsx)(s.Z,{...t,variant:"circular",height:a().secondBar,width:a().secondBar})}),(0,n.jsx)(r.ZP,{item:!0,width:100,display:"flex",justifyContent:"center",children:(0,n.jsx)(s.Z,{...t,variant:"circular",height:a().thirdBar,width:a().firstBar})})]}):(0,n.jsxs)(r.ZP,{container:!0,justifyContent:"center",rowGap:i?5:2,children:[(0,n.jsx)(r.ZP,{item:!0,xs:12,children:(0,n.jsx)(s.Z,{...t,variant:"rounded",height:a().firstBar})}),(0,n.jsx)(r.ZP,{item:!0,xs:12,children:(0,n.jsx)(s.Z,{...t,variant:"rounded",animation:"wave",height:a().secondBar})}),(0,n.jsx)(r.ZP,{item:!0,xs:12,children:(0,n.jsx)(s.Z,{...t,variant:"rounded",height:a().thirdBar})})]})}},7034:(e,l,t)=>{"use strict";t.d(l,{Z:()=>i});t(2791);var s=t(9658),r=t(3543),n=t(184);const i=e=>{let{open:l=!1,text:t,type:i,onClose:a,...o}=e;return(0,n.jsx)(r.Z,{open:l,autoHideDuration:5e3,onClose:()=>{a()},...o,children:(0,n.jsx)(s.Z,{severity:i,children:t})})}},2480:()=>{}}]);
//# sourceMappingURL=731.44182eed.chunk.js.map