"use strict";(self.webpackChunkbudget_management=self.webpackChunkbudget_management||[]).push([[305],{3305:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var a=n(2791),s=n(7689),l=n(56),r=n(2385),i=n(1889),o=n(9276),d=n(7198),c=n(5022),u=n(3394),x=n(8112),m=n(7931),h=n(4372),p=n(5900),j=n(7195),f=n(5527),Z=n(890),y=n(3967),C=n(6606),g=n(6581),v=n(184);const T=e=>{let{data:t,onClick:n}=e;const{palette:{primary:{main:a,contrastText:s},error:o}}=(0,y.Z)(),{name:d,icon:c,accountName:u,accountIcon:x,createdAt:m,amount:h,type:p}=t,j=(0,C.Z)(m).format(l.zT);return(0,v.jsx)(f.Z,{elevation:1,sx:{paddingX:2,backgroundColor:a},onClick:()=>{n&&n(t)},children:(0,v.jsxs)(i.ZP,{container:!0,columnSpacing:2,alignItems:"center",sx:{minHeight:40,cursor:"pointer"},children:[(0,v.jsx)(i.ZP,{item:!0,xs:1,display:"flex",children:c&&(0,v.jsx)(g.Z,{name:c,sx:{color:s,fontSize:{sm:22,xs:18}}})}),(0,v.jsx)(i.ZP,{item:!0,xs:2.5,children:(0,v.jsx)(Z.Z,{noWrap:!0,color:s,sx:{fontSize:{sm:15,xs:13}},children:d})}),(0,v.jsx)(i.ZP,{item:!0,xs:2.5,display:"flex",justifyContent:"flex-end",children:(0,v.jsx)(Z.Z,{noWrap:!0,color:p===r.a9.expense?o.main:s,sx:{fontSize:{sm:15,xs:13}},children:h})}),(0,v.jsx)(i.ZP,{item:!0,xs:2,display:"flex",justifyContent:"flex-end",children:(0,v.jsx)(Z.Z,{noWrap:!0,color:s,sx:{fontSize:{sm:15,xs:13}},children:u})}),(0,v.jsx)(i.ZP,{item:!0,xs:1,display:"flex",children:x&&(0,v.jsx)(g.Z,{name:x,color:"primary",sx:{fontSize:{sm:22,xs:18},color:s}})}),(0,v.jsx)(i.ZP,{item:!0,xs:3,display:"flex",justifyContent:"flex-end",children:(0,v.jsx)(Z.Z,{noWrap:!0,color:s,sx:{fontSize:{sm:15,xs:13}},children:j})})]})})},A=()=>{const e=(0,x.TL)(),{transactions:t,status:n}=(0,x.CG)(m.Bt),{activePeriodFilter:r}=(0,x.CG)(m.Tc),{defaultPeriod:f}=(0,x.CG)(m.vi),Z=(0,s.s0)(),{t:y}=(0,u.$G)(),C=l.OL;a.useEffect((()=>{"idle"===n&&e((0,m.f1)(r))}),[e,n,r]);const g=e=>{let{id:t,name:n}=e;Z("".concat(l.Z6.transactions.path,"/view/").concat(n),{state:{id:t}})};return(0,v.jsxs)(o.Z,{flexGrow:1,children:[(0,v.jsx)(p.Z,{text:y("TRANSACTIONS.PAGE_TITLE")}),(0,v.jsx)(o.Z,{sx:{marginBottom:3,display:"flex",justifyContent:"flex-end"},children:(0,v.jsx)(d.Z,{variant:"outlined",value:r||f,onChange:t=>{const n=t.target.value;e((0,m.IL)(n)),e((0,m.p6)()),e((0,m.dA)())},style:{height:"40px"},children:C.map((e=>{let{value:t,label:n}=e;return(0,v.jsx)(c.Z,{value:t,children:y(n)},t)}))})}),(0,v.jsx)(i.ZP,{container:!0,rowGap:2,children:"loading"===n?(0,v.jsx)(i.ZP,{item:!0,xs:12,children:(0,v.jsx)(h.Z,{type:"list"})}):"failed"!==n&&"succeeded"!==n||null!==t&&void 0!==t&&t.length?(0,v.jsx)(v.Fragment,{children:t.map((e=>{return(0,v.jsx)(i.ZP,{item:!0,xs:12,children:(0,v.jsx)(T,{data:(t=e,{...t,name:t.nameKey?y(t.nameKey):t.name,accountName:t.accountNameKey?y(t.accountNameKey):t.accountName}),onClick:g})},e.id);var t}))}):(0,v.jsx)(i.ZP,{item:!0,xs:12,children:(0,v.jsx)(j.Z,{text:y("TRANSACTIONS.EMPTY_TEXT")})})})]})};var N=n(1134),S=n(8870),V=n(3013),E=n(7497),O=n(1634),I=n(7034),P=n(8692),b=n(645),G=n(1890),w=n(7730),M=n(9525),k=n(7559),B=n(8556);const R=e=>{let{mode:t}=e;const n=l.a,o=l.G7,d=(0,x.TL)(),f=(0,s.s0)(),{state:g}=(0,s.TH)(),{categories:T}=(0,x.CG)(m.uY),A=(0,x.CG)(m.Jp),{getStatus:R,createEditStatus:W,deleteStatus:_}=(0,x.CG)(m.Bt),K=(0,x.CG)(m.w2),{accounts:D}=(0,x.CG)(m.bk),L=(0,x.CG)(m.en),{defaultAccount:q=""}=(0,x.CG)(m.vi),z=(0,x.CG)(m.yR),{palette:{info:{contrastText:Y}}}=(0,y.Z)(),F=(0,V.Lt)(),{t:Q}=(0,u.$G)(),[X,H]=a.useState(!1),[U,$]=a.useState(!1),[J,ee]=a.useState(!1),[te,ne]=a.useState(!1),ae="loading"===W,se="loading"===_,le=null===g||void 0===g?void 0:g.id,re=null!==z&&void 0!==z&&z.nameKey?Q(z.nameKey):(null===z||void 0===z?void 0:z.name)||"",ie=(null===g||void 0===g?void 0:g.categoryType)||r.a9.expense,oe=t===r.df.create,de=t===r.df.edit,ce=t===r.df.view,ue=(0,V.pz)(t,Q,R,"TRANSACTIONS","NEW_TRANSACTION","EMPTY_TITLE",z),xe={amount:"",categoryId:"",accountId:q||"",type:String(ie),createdAt:oe?(0,C.Z)().format():void 0,note:""},me=(0,N.cI)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:xe}),{setValue:he,handleSubmit:pe,watch:je,reset:fe}=me,Ze=je(r.Vn.type),ye=je(r.Vn.accountId),Ce=je(r.Vn.createdAt),ge=e=>{const t=Number(e);he(r.Vn.type,t,{shouldValidate:!0}),he(r.Vn.categoryId,xe.categoryId),he(r.Vn.icon,xe.icon),he(r.Vn.name,xe.name)},ve=e=>{let{id:t,name:n,nameKey:a,icon:s}=e;ce||(he(r.Vn.categoryId,t,{shouldValidate:!0}),he(r.Vn.icon,s),he(r.Vn.name,n,{shouldValidate:!0}),he("nameKey",a))},Te=e=>{he(r.Vn.accountId,e.target.value,{shouldValidate:!0})},Ae=e=>{he(r.Vn.createdAt,e.format(),{shouldValidate:!0})},Ne=e=>{const t={...e,amount:Number(e.amount),type:Number(e.type),createdAt:(0,C.Z)(e.createdAt).toDate()};d(de?(0,m.vF)([le,t]):(0,m.dT)(t)),H(!0)},Se=a.useCallback((()=>{z&&(he(r.Vn.categoryId,z.categoryId),he(r.Vn.accountId,z.accountId),he(r.Vn.icon,z.icon),he(r.Vn.amount,(0,V.Co)(z.amount)),he(r.Vn.type,String(z.type)),he(r.Vn.createdAt,z.createdAt),he(r.Vn.note,z.note),he("name",z.name))}),[z,he]),Ve=a.useCallback((()=>{d((0,m.Qr)())}),[d]),Ee=a.useCallback((()=>{f("".concat(oe?l.Z6.dashboard.path:l.Z6.transactions.path)),Ve()}),[f,Ve,oe]);a.useEffect((()=>{"idle"===A&&d((0,m.CP)()),"idle"===L&&d((0,m.T8)())}),[d,A,L]),a.useEffect((()=>{"succeeded"===W&&X&&(Ee(),ee(!1),d((0,m.T8)())),"failed"===W&&X&&ee(!0)}),[d,Ee,W,X]),a.useEffect((()=>{"succeeded"===_&&U&&Ee(),"failed"===_&&U&&(ee(!0),ne(!1))}),[Ee,_,U]),a.useEffect((()=>{le||d((0,m.i1)())}),[le,d]),a.useEffect((()=>{!le||"idle"!==R||oe||U||d((0,m.fo)(le))}),[le,oe,R,d,U]),a.useEffect((()=>{he(r.Vn.accountId,q)}),[he,q]),a.useEffect((()=>{Se()}),[Se]),a.useEffect((()=>()=>{Ve()}),[Ve]);return(0,v.jsxs)(S.Z,{component:"form",display:"flex",flexDirection:"column",flexGrow:1,onSubmit:pe(Ne),children:[(0,v.jsx)(p.Z,{withBackButton:!0,withEditButton:ce&&!!z,withDeleteButton:de&&!!z,withCancelButton:!ce&&!!z,text:ue,onBackButtonClick:Ee,onEditButtonClick:()=>{de||f("".concat(l.Z6.transactions.path,"/edit/").concat(re),{state:{id:le}})},onDeleteButtonClick:()=>{ne(!0)},onCancelButtonClick:()=>{oe?fe(xe):Se(),oe?f(l.Z6.dashboard.path):f("".concat(l.Z6.transactions.path,"/view/").concat(re),{state:{id:le}})}}),(0,v.jsx)(S.Z,{flexGrow:1,children:"loading"===R?(0,v.jsx)(h.Z,{type:"form"}):oe||z&&le||"failed"!==R?(0,v.jsx)(N.RV,{...me,children:(0,v.jsxs)(i.ZP,{container:!0,rowGap:7,children:[(0,v.jsxs)(i.ZP,{item:!0,xs:12,children:[(0,v.jsx)(Z.Z,{color:Y,children:Q("COMMON.TYPE")}),(0,v.jsx)(w.Z,{readonly:ce,name:r.Vn.type,rules:{required:{value:!0,message:Q(F.type.required.message)}},options:(0,V.hf)(o,Q),labelColor:Y,value:Ze,onRadioChange:ge})]}),(0,v.jsx)(i.ZP,{item:!0,xs:12,children:(0,v.jsx)(E.Z,{InputProps:{readOnly:ce},label:Q("COMMON.AMOUNT"),type:"number",name:r.Vn.amount,rules:{required:{value:!0,message:Q(F.amount.required.message)},pattern:{value:n,message:Q(F.amount.pattern.message)}}})}),(0,v.jsx)(i.ZP,{item:!0,xs:12,children:(0,v.jsx)(G.Z,{inputProps:{readOnly:ce},label:Q("COMMON.ACCOUNT"),name:r.Vn.accountId,value:D.length?ye||q:"",onChange:Te,rules:{required:{value:!0,message:Q(F.accountId.required.message)}},renderValue:e=>(0,v.jsx)(Z.Z,{children:(0,V.ut)(e,D,Q)}),children:D.map((e=>(0,v.jsx)(c.Z,{value:e.id,sx:{display:"flex",justifyContent:"space-between"},children:(0,v.jsx)(k.Z,{data:e})},e.id)))})}),(0,v.jsx)(i.ZP,{item:!0,xs:12,children:(0,v.jsx)(b.Z,{disableFuture:!0,readOnly:ce,name:r.Vn.createdAt,label:Q("COMMON.DATE"),value:(0,C.Z)(Ce).isValid()?(0,C.Z)(Ce):null,rules:{required:{value:!0,message:Q(F.createdAt.required.message)},validate:{maxDate:e=>Promise.resolve((0,C.Z)(e)<=(0,C.Z)()||Q(F.createdAt.max.message))}},onChange:Ae,sx:{width:"100%"}})}),(0,v.jsx)(i.ZP,{item:!0,xs:12,children:(0,v.jsx)(E.Z,{inputProps:{readOnly:ce},label:Q("COMMON.NOTE"),name:r.Vn.note})}),(0,v.jsx)(i.ZP,{item:!0,xs:12,children:(0,v.jsx)(B.Z,{name:r.Vn.categoryId,label:Q("COMMON.CATEGORY"),rules:{required:{value:!0,message:Q(F.categoryId.required.message)}},render:e=>{let{field:t}=e;return(0,v.jsx)(i.ZP,{container:!0,...t,columnGap:4,rowGap:4,children:T.filter((e=>{let{type:t}=e;return t===Number(Ze)})).map((e=>{return(0,v.jsx)(i.ZP,{item:!0,children:(0,v.jsx)(P.Z,{data:(n=e,{...n,name:n.nameKey?Q(n.nameKey):n.name}),selected:t.value,readonly:ce,onItemClick:ve})},e.id);var n}))})}})})]})}):(0,v.jsx)(j.Z,{text:Q("TRANSACTIONS.EMPTY_TEXT_RENDER_CONTENT")})}),!ce&&(0,v.jsx)(i.ZP,{container:!0,display:"flex",justifyContent:"flex-end",rowGap:2,columnGap:2,sx:{marginTop:4,marginBottom:4},children:(0,v.jsx)(i.ZP,{item:!0,sm:"auto",xs:12,children:(0,v.jsx)(O.Z,{"aria-label":"Save transaction",fullWidth:!0,type:"submit",variant:"contained",loading:ae,onClick:pe(Ne),children:Q("COMMON.SAVE")})})}),(0,v.jsx)(I.Z,{type:"error",open:J,text:null!==K&&void 0!==K&&K.messageKey?Q(K.messageKey):(null===K||void 0===K?void 0:K.message)||"",onClose:()=>{ee(!1),$(!1)}}),(0,v.jsx)(M.Z,{fullWidth:!0,maxWidth:"xs",title:Q("TRANSACTIONS.DELETE_DIALOG_TITLE"),actionButtonText:Q("COMMON.YES"),open:te,loading:se,onClose:()=>{ne(!1)},onAction:()=>{d((0,m.Ks)(le)),$(!0)},children:(0,v.jsx)(Z.Z,{variant:"subtitle1",children:Q("TRANSACTIONS.DELETE_DIALOG_CONFIRM")})})]})},W=()=>(0,v.jsxs)(s.Z5,{children:[(0,v.jsx)(s.AW,{path:"/",element:(0,v.jsx)(A,{})}),(0,v.jsx)(s.AW,{path:"/new",element:(0,v.jsx)(R,{mode:r.df.create})}),(0,v.jsx)(s.AW,{path:"/view/:id",element:(0,v.jsx)(R,{mode:r.df.view})}),(0,v.jsx)(s.AW,{path:"/edit/:id",element:(0,v.jsx)(R,{mode:r.df.edit})}),(0,v.jsx)(s.AW,{path:"*",element:(0,v.jsx)(s.Fg,{to:l.Z6.accounts.path,replace:!0})})]})},645:(e,t,n)=>{n.d(t,{Z:()=>x});n(2791);var a=n(1134),s=n(8870),l=n(4925),r=n(7071),i=n(9617),o=n(1652),d=n(7792),c=n(5866),u=n(184);const x=e=>{let{name:t,label:n,rules:x={},...m}=e;const{control:h,formState:{errors:p}}=(0,a.Gc)();return(0,u.jsx)(o._,{dateAdapter:d.y,children:(0,u.jsx)(c.C,{sx:{...m.sx,paddingTop:2,overflow:"initial"},components:["DatePicker"],children:(0,u.jsx)(a.Qr,{control:h,name:t,rules:x,render:e=>{let{field:a,fieldState:{error:o}}=e;return(0,u.jsxs)(s.Z,{position:"relative",sx:{width:"100%"},children:[(0,u.jsx)(l.Z,{children:n}),(0,u.jsx)(i.M,{...a,...m}),p[t]&&(0,u.jsx)(r.Z,{sx:{position:"absolute"},error:!0,children:null===o||void 0===o?void 0:o.message})]})}})})})}},1890:(e,t,n)=>{n.d(t,{Z:()=>d});n(2791);var a=n(1134),s=n(7198),l=n(7071),r=n(8870),i=n(4925),o=n(184);const d=e=>{let{name:t,label:n,rules:d={},children:c,...u}=e;const{control:x,formState:{errors:m}}=(0,a.Gc)();return(0,o.jsx)(a.Qr,{control:x,name:t,rules:d,render:e=>{let{field:a,fieldState:{error:d}}=e;return(0,o.jsxs)(r.Z,{position:"relative",children:[(0,o.jsx)(i.Z,{children:n}),(0,o.jsx)(s.Z,{fullWidth:!0,variant:"outlined",error:!!m[t],...a,...u,children:c}),m[t]&&(0,o.jsx)(l.Z,{sx:{position:"absolute"},error:!0,children:null===d||void 0===d?void 0:d.message})]})}})}}}]);
//# sourceMappingURL=305.51a8537d.chunk.js.map