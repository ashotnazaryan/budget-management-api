"use strict";(self.webpackChunkbudget_management=self.webpackChunkbudget_management||[]).push([[387],{2387:(e,t,r)=>{r.r(t),r.d(t,{default:()=>k});var n=r(2791),a=r(7689),s=r(56),o=r(2385),i=r(1134),l=r(6606),c=r(3394),d=r(8870),u=r(1889),x=r(890),m=r(5022),h=r(8112),f=r(7931),j=r(3013),Z=r(5900),p=r(1634),C=r(1890),A=r(7497),v=r(645),g=r(7034),S=r(9525),T=r(4372),E=r(7195),B=r(7559),y=r(184);const w=e=>{let{mode:t}=e;const r=s.a,w=(0,a.s0)(),b=(0,h.TL)(),{getStatus:N,createEditStatus:P,deleteStatus:O}=(0,h.CG)(f.Nu),R=(0,h.CG)(f.xm),G=(0,h.CG)(f.rD),{accounts:k}=(0,h.CG)(f.bk),M=(0,h.CG)(f.en),W=(0,j._N)(),{t:_}=(0,c.$G)(),[D,F]=n.useState(!1),[I,V]=n.useState(!1),[L,q]=n.useState(!1),[z,U]=n.useState(!1),K="loading"===P,H="loading"===O,Q=t===o.df.create,X=t===o.df.edit,Y=t===o.df.view,{id:$}=(0,a.UO)(),J={fromAccount:"",toAccount:"",amount:"",createdAt:Q?(0,l.Z)().format():void 0},ee=(0,i.cI)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:J}),{handleSubmit:te,setValue:re,watch:ne,reset:ae}=ee,se=ne(o.Cd.fromAccount),oe=ne(o.Cd.toAccount),ie=ne(o.Cd.createdAt),le=e=>{const t=k.find((t=>{let{id:r}=t;return r===e.target.value}));re(o.Cd.fromAccount,t,{shouldValidate:!0})},ce=e=>{const t=k.find((t=>{let{id:r}=t;return r===e.target.value}));re(o.Cd.toAccount,t,{shouldValidate:!0})},de=e=>{re(o.Cd.createdAt,e.format(),{shouldValidate:!0})},ue=e=>{const t={...e,amount:Number(e.amount),fromAccount:e.fromAccount.id,toAccount:e.toAccount.id,createdAt:(0,l.Z)(e.createdAt).toDate()};b(X?(0,f.aT)([$,t]):(0,f.LH)(t)),F(!0)},xe=n.useCallback((()=>{G&&(re(o.Cd.fromAccount,G.fromAccount),re(o.Cd.toAccount,G.toAccount),re(o.Cd.amount,(0,j.Co)(G.amount)),re(o.Cd.createdAt,G.createdAt))}),[G,re]),me=n.useCallback((()=>{b((0,f.bW)())}),[b]),he=n.useCallback((()=>{w(Q?s.Z6.accounts.path:s.Z6.transfers.path),me()}),[w,Q,me]);n.useEffect((()=>{"idle"===M&&b((0,f.T8)())}),[b,M]),n.useEffect((()=>{"succeeded"===P&&D&&(b((0,f.T8)()),he(),V(!1)),"failed"===P&&D&&V(!0)}),[b,he,P,D]),n.useEffect((()=>{"succeeded"===O&&L&&he(),"failed"===O&&L&&(V(!0),U(!1))}),[he,O,L]),n.useEffect((()=>{$||b((0,f.Sf)())}),[$,b]),n.useEffect((()=>{!$||"idle"!==N||Q||L||b((0,f.x9)($))}),[$,Q,N,b,L]),n.useEffect((()=>{xe()}),[xe]),n.useEffect((()=>()=>{me()}),[me]);return(0,y.jsxs)(d.Z,{component:"form",display:"flex",flexDirection:"column",flexGrow:1,onSubmit:te(ue),children:[(0,y.jsx)(Z.Z,{withBackButton:!0,withEditButton:Y&&!!G,withDeleteButton:X&&!!G,withCancelButton:!Y&&!!G,text:_(X?"TRANSFERS.EDIT_TRANSFER":Y?"TRANSFERS.VIEW_TRANSFER":"TRANSFERS.NEW_TRANSFER"),onBackButtonClick:he,onEditButtonClick:()=>{X||w("".concat(s.Z6.transfers.path,"/edit/").concat($))},onDeleteButtonClick:()=>{U(!0)},onCancelButtonClick:()=>{Q?ae(J):xe(),w(Q?s.Z6.accounts.path:"".concat(s.Z6.transfers.path,"/view/").concat($))}}),(0,y.jsx)(d.Z,{flexGrow:1,children:"loading"===N?(0,y.jsx)(T.Z,{type:"form"}):Q||G&&$||"failed"!==N?(0,y.jsx)(i.RV,{...ee,children:(0,y.jsxs)(u.ZP,{container:!0,rowGap:7,columnSpacing:2,children:[(0,y.jsx)(u.ZP,{item:!0,sm:6,xs:12,children:(0,y.jsx)(C.Z,{disabled:!Q,label:_("ACCOUNTS.FROM_ACCOUNT"),name:o.Cd.fromAccount,value:se.id||"",onChange:le,rules:{required:{value:!0,message:_(W.fromAccount.required.message)}},renderValue:e=>(0,y.jsx)(x.Z,{children:(0,j.ut)(e,k,_)}),children:k.map((e=>(0,y.jsx)(m.Z,{value:e.id,sx:{display:"flex",justifyContent:"space-between"},children:(0,y.jsx)(B.Z,{data:e})},e.id)))})}),(0,y.jsx)(u.ZP,{item:!0,sm:6,xs:12,children:(0,y.jsx)(C.Z,{disabled:!Q,label:_("ACCOUNTS.TO_ACCOUNT"),name:o.Cd.toAccount,value:oe.id||"",onChange:ce,rules:{required:{value:!0,message:_(W.toAccount.required.message)}},renderValue:e=>(0,y.jsx)(x.Z,{children:(0,j.ut)(e,k,_)}),children:k.map((e=>(0,y.jsx)(m.Z,{value:e.id,sx:{display:"flex",justifyContent:"space-between"},children:(0,y.jsx)(B.Z,{data:e})},e.id)))})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,children:(0,y.jsx)(A.Z,{InputProps:{readOnly:Y},label:_("COMMON.AMOUNT"),type:"number",name:o.Cd.amount,rules:{required:{value:!0,message:_(W.amount.required.message)},pattern:{value:r,message:_(W.amount.pattern.message)}}})}),(0,y.jsx)(u.ZP,{item:!0,xs:12,children:(0,y.jsx)(v.Z,{readOnly:Y,name:o.Cd.createdAt,label:_("COMMON.DATE"),value:(0,l.Z)(ie).isValid()?(0,l.Z)(ie):null,maxDate:(0,l.Z)(),rules:{required:!0,validate:{maxDate:e=>Promise.resolve((0,l.Z)(e)<=(0,l.Z)()||_(W.createdAt.max.message))}},onChange:de,sx:{width:"100%"}})})]})}):(0,y.jsx)(E.Z,{text:_("TRANSFERS.EMPTY_TEXT_RENDER_CONTENT")})}),!Y&&(0,y.jsx)(u.ZP,{container:!0,display:"flex",justifyContent:"flex-end",rowGap:2,columnGap:2,sx:{marginTop:4,marginBottom:4},children:(0,y.jsx)(u.ZP,{item:!0,sm:"auto",xs:12,children:(0,y.jsx)(p.Z,{"aria-label":"Save transfer",fullWidth:!0,type:"submit",variant:"contained",loading:K,onClick:te(ue),children:_("COMMON.SAVE")})})}),(0,y.jsx)(g.Z,{type:"error",open:I,text:null!==R&&void 0!==R&&R.messageKey?_(R.messageKey):(null===R||void 0===R?void 0:R.message)||"",onClose:()=>{V(!1),q(!1)}}),(0,y.jsx)(S.Z,{fullWidth:!0,maxWidth:"xs",title:_("TRANSFERS.DELETE_DIALOG_TITLE"),actionButtonText:_("COMMON.YES"),open:z,loading:H,onClose:()=>{U(!1)},onAction:()=>{b((0,f.Wr)($)),q(!0)},children:(0,y.jsx)(x.Z,{variant:"subtitle1",children:_("TRANSFERS.DELETE_DIALOG_CONFIRM")})})]})};var b=r(9276),N=r(5527),P=r(3967),O=r(6581);const R=e=>{let{data:t,onClick:r}=e;const{palette:{primary:{main:n,contrastText:a}}}=(0,P.Z)(),{fromAccount:i,toAccount:c,createdAt:d,amount:m}=t,h=(0,l.Z)(d).format(s.zT);return(0,y.jsx)(N.Z,{elevation:1,sx:{paddingX:2,backgroundColor:n},onClick:()=>{r&&r(t)},children:(0,y.jsxs)(u.ZP,{container:!0,columnSpacing:2,alignItems:"center",sx:{minHeight:40,cursor:"pointer"},children:[(0,y.jsxs)(u.ZP,{item:!0,container:!0,xs:6,columnGap:2,display:"flex",alignItems:"center",children:[(0,y.jsx)(x.Z,{noWrap:!0,color:a,sx:{fontSize:{sm:15,xs:13}},children:i.name}),(0,y.jsx)(O.Z,{name:o.Tu.arrowForward,sx:{fontSize:{sm:22,xs:18},color:a}}),(0,y.jsx)(x.Z,{noWrap:!0,color:a,sx:{fontSize:{sm:15,xs:13}},children:c.name})]}),(0,y.jsx)(u.ZP,{item:!0,xs:3,children:(0,y.jsx)(x.Z,{noWrap:!0,color:a,sx:{fontSize:{sm:15,xs:13}},children:m})}),(0,y.jsx)(u.ZP,{item:!0,xs:3,display:"flex",justifyContent:"flex-end",children:(0,y.jsx)(x.Z,{noWrap:!0,color:a,sx:{fontSize:{sm:15,xs:13}},children:h})})]})})},G=()=>{const e=(0,h.TL)(),{transfers:t,status:r}=(0,h.CG)(f.Nu),o=(0,a.s0)(),{t:i}=(0,c.$G)(),l=e=>{let{id:t}=e;o("".concat(s.Z6.transfers.path,"/view/").concat(t),{state:{id:t}})};n.useEffect((()=>{"idle"===r&&e((0,f.qE)())}),[e,r]);return(0,y.jsxs)(b.Z,{flexGrow:1,children:[(0,y.jsx)(Z.Z,{withBackButton:!0,text:i("TRANSFERS.PAGE_TITLE"),onBackButtonClick:()=>{o("".concat(s.Z6.accounts.path))}}),(0,y.jsx)(u.ZP,{container:!0,rowGap:2,children:"loading"===r?(0,y.jsx)(u.ZP,{item:!0,xs:12,children:(0,y.jsx)(T.Z,{type:"list"})}):"failed"!==r&&"succeeded"!==r||null!==t&&void 0!==t&&t.length?(0,y.jsx)(y.Fragment,{children:t.map((e=>{return(0,y.jsx)(u.ZP,{item:!0,xs:12,children:(0,y.jsx)(R,{data:(t=e,{...t,fromAccount:{...t.fromAccount,name:t.fromAccount.nameKey?i(t.fromAccount.nameKey):t.fromAccount.name}}),onClick:l})},e.id);var t}))}):(0,y.jsx)(u.ZP,{item:!0,xs:12,children:(0,y.jsx)(E.Z,{text:i("TRANSFERS.EMPTY_TEXT")})})})]})},k=()=>(0,y.jsxs)(a.Z5,{children:[(0,y.jsx)(a.AW,{path:"/",element:(0,y.jsx)(G,{})}),(0,y.jsx)(a.AW,{path:"/new",element:(0,y.jsx)(w,{mode:o.df.create})}),(0,y.jsx)(a.AW,{path:"/view/:id",element:(0,y.jsx)(w,{mode:o.df.view})}),(0,y.jsx)(a.AW,{path:"/edit/:id",element:(0,y.jsx)(w,{mode:o.df.edit})}),(0,y.jsx)(a.AW,{path:"*",element:(0,y.jsx)(a.Fg,{to:s.Z6.transfers.path,replace:!0})})]})},7195:(e,t,r)=>{r.d(t,{Z:()=>l});r(2791);var n=r(8870),a=r(3967),s=r(890),o=r(3394),i=r(184);const l=e=>{let{text:t,...r}=e;const{palette:{info:{contrastText:l}}}=(0,a.Z)(),{t:c}=(0,o.$G)(),d=t||c("COMMON.NO_DATA");return(0,i.jsx)(n.Z,{display:"flex",justifyContent:"center",...r,sx:{width:"100%",...r.sx},children:(0,i.jsx)(s.Z,{noWrap:!0,color:l,fontSize:{sm:18,xs:16},children:d})})}},645:(e,t,r)=>{r.d(t,{Z:()=>x});r(2791);var n=r(1134),a=r(8870),s=r(4925),o=r(7071),i=r(9617),l=r(1652),c=r(7792),d=r(5866),u=r(184);const x=e=>{let{name:t,label:r,rules:x={},...m}=e;const{control:h,formState:{errors:f}}=(0,n.Gc)();return(0,u.jsx)(l._,{dateAdapter:c.y,children:(0,u.jsx)(d.C,{sx:{...m.sx,paddingTop:2,overflow:"initial"},components:["DatePicker"],children:(0,u.jsx)(n.Qr,{control:h,name:t,rules:x,render:e=>{let{field:n,fieldState:{error:l}}=e;return(0,u.jsxs)(a.Z,{position:"relative",sx:{width:"100%"},children:[(0,u.jsx)(s.Z,{children:r}),(0,u.jsx)(i.M,{...n,...m}),f[t]&&(0,u.jsx)(o.Z,{sx:{position:"absolute"},error:!0,children:null===l||void 0===l?void 0:l.message})]})}})})})}},7497:(e,t,r)=>{r.d(t,{Z:()=>m});r(2791);var n,a=r(1134),s=r(7071),o=r(8870),i=r(3967),l=r(168),c=r(225),d=r(3006);const u=(0,c.Z)(d.Z)(n||(n=(0,l.Z)(["\n  &.MuiInputBase-input {\n    border-color: ",";\n    color: ",";\n  },\n  &.MuiOutlinedInput-root {\n    &.Mui-error {\n      & .MuiOutlinedInput-notchedOutline: {\n        border-color: ",",\n      }\n    }\n    border-color: ",";\n    color: ",";\n  }\n"])),(e=>e.theme.palette.primary.main),(e=>e.theme.palette.primary.main),(e=>e.theme.palette.error.main),(e=>e.theme.palette.primary.main),(e=>e.theme.palette.error.main));var x=r(184);const m=e=>{let{name:t,rules:r={},...n}=e;const l=(0,i.Z)(),{control:c,formState:{errors:d}}=(0,a.Gc)();return(0,x.jsx)(a.Qr,{control:c,name:t,rules:r,render:e=>{let{field:r,fieldState:{error:a}}=e;return(0,x.jsxs)(o.Z,{position:"relative",children:[(0,x.jsx)(u,{fullWidth:!0,...r,...n,theme:l,error:!!d[t]}),d[t]&&(0,x.jsx)(s.Z,{sx:{position:"absolute"},error:!0,children:null===a||void 0===a?void 0:a.message})]})}})}},1890:(e,t,r)=>{r.d(t,{Z:()=>c});r(2791);var n=r(1134),a=r(7198),s=r(7071),o=r(8870),i=r(4925),l=r(184);const c=e=>{let{name:t,label:r,rules:c={},children:d,...u}=e;const{control:x,formState:{errors:m}}=(0,n.Gc)();return(0,l.jsx)(n.Qr,{control:x,name:t,rules:c,render:e=>{let{field:n,fieldState:{error:c}}=e;return(0,l.jsxs)(o.Z,{position:"relative",children:[(0,l.jsx)(i.Z,{children:r}),(0,l.jsx)(a.Z,{fullWidth:!0,variant:"outlined",error:!!m[t],...n,...u,children:d}),m[t]&&(0,l.jsx)(s.Z,{sx:{position:"absolute"},error:!0,children:null===c||void 0===c?void 0:c.message})]})}})}},4372:(e,t,r)=>{r.d(t,{Z:()=>o});r(2791);var n=r(7047),a=r(1889),s=r(184);const o=e=>{let{type:t,...r}=e;const o="form"===t,i=()=>{switch(t){case"list":default:return{firstBar:40,secondBar:40,thirdBar:40};case"form":return{firstBar:56,secondBar:56,thirdBar:56};case"summary":return{firstBar:30,secondBar:60,thirdBar:120};case"circular":return{firstBar:64,secondBar:64,thirdBar:64}}};return"circular"===t?(0,s.jsxs)(a.ZP,{container:!0,columnGap:4,rowGap:4,children:[(0,s.jsx)(a.ZP,{item:!0,width:100,display:"flex",justifyContent:"center",children:(0,s.jsx)(n.Z,{...r,variant:"circular",height:i().firstBar,width:i().firstBar})}),(0,s.jsx)(a.ZP,{item:!0,width:100,display:"flex",justifyContent:"center",children:(0,s.jsx)(n.Z,{...r,variant:"circular",height:i().secondBar,width:i().secondBar})}),(0,s.jsx)(a.ZP,{item:!0,width:100,display:"flex",justifyContent:"center",children:(0,s.jsx)(n.Z,{...r,variant:"circular",height:i().thirdBar,width:i().firstBar})})]}):(0,s.jsxs)(a.ZP,{container:!0,justifyContent:"center",rowGap:o?5:2,children:[(0,s.jsx)(a.ZP,{item:!0,xs:12,children:(0,s.jsx)(n.Z,{...r,variant:"rounded",height:i().firstBar})}),(0,s.jsx)(a.ZP,{item:!0,xs:12,children:(0,s.jsx)(n.Z,{...r,variant:"rounded",animation:"wave",height:i().secondBar})}),(0,s.jsx)(a.ZP,{item:!0,xs:12,children:(0,s.jsx)(n.Z,{...r,variant:"rounded",height:i().thirdBar})})]})}},7034:(e,t,r)=>{r.d(t,{Z:()=>o});r(2791);var n=r(9658),a=r(3543),s=r(184);const o=e=>{let{open:t=!1,text:r,type:o,onClose:i,...l}=e;return(0,s.jsx)(a.Z,{open:t,autoHideDuration:5e3,onClose:()=>{i()},...l,children:(0,s.jsx)(n.Z,{severity:o,children:r})})}}}]);
//# sourceMappingURL=387.156b37de.chunk.js.map